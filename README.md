> ê°œì¸ì ìœ¼ë¡œ ì–´ë ¤ì› ë˜ ìŠ¤í”„ë§ì˜ ì›ë¦¬ê³¼ ì‚¬ìš©ê¸°ìˆ ì„ í•™ìŠµí•˜ê¸° ìœ„í•˜ì—¬ ì‘ì„±í•œ ê¸€ì…ë‹ˆë‹¤. ë§ì€ ë‚´ìš©ì„ ì°¸ê³ í•˜ì—¬ ë‚´ìš©ì„ ì •ë¦¬í•˜ì˜€ìŠµë‹ˆë‹¤. **ìˆ˜ì •ì‚¬í•­ì´ ìˆë‹¤ë©´ ì–¸ì œë“  ì§€ì í•´ì£¼ì„¸ìš”!!**

## ğŸ”¥ ê°œìš”

- ìŠ¤í”„ë§ì´ë€? ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ëŠ” ìë°” ì§„ì˜ì˜ ì›¹ í”„ë ˆì„ì›Œí¬ì´ë‹¤. EJBë¼ëŠ” ê²¨ìš¸ì„ ë„˜ì–´ ìƒˆë¡œìš´ ì‹œì‘ì´ë¼ëŠ” ëœ»ìœ¼ë¡œ ì‹œì‘ëœ ìŠ¤í”„ë§ì€ í˜„ì¬ëŠ” ë‹¤ì–‘í•œ ìƒíƒœê³„ë¥¼ êµ¬ì¶•í•˜ê³  ìˆë‹¤.
- ê°œë°œìë¡œ í™œë™í•˜ë©° ìŠ¤í”„ë§ì„ ì‚¬ìš©í•˜ëŠ” ì…ì¥ì—ì„œ ìŠ¤í”„ë§ì´ ì œê³µí•˜ê³  ìˆëŠ” ë‹¤ì–‘í•œ ê¸°ëŠ¥ì„ ë‹¹ì—°í•˜ê²Œ ì‚¬ìš©í•´ì™”ì§€ë§Œ, ì •ì‘ ìŠ¤í”„ë§ì„ ì™œ ì‚¬ìš©í•˜ëŠ”ì§€? ì‚¬ìš©ë˜ëŠ” ê¸°ìˆ ì´ ë¬´ì—‡ì¸ì§€? í•µì‹¬ì›ë¦¬ë¥¼ íŒŒì•…í•˜ì§€ ëª»í•˜ê³  ìŠ¤í”„ë§ì„ ì‚¬ìš©í•´ì™”ë‹¤.
- ê·¸ë˜ì„œ ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ëŠ” ì™œ ë§Œë“¤ì–´ì¡ŒëŠ”ì§€, í•µì‹¬ê°œë…ì€ ë¬´ì—‡ì¸ì§€ ì•Œì•„ë³´ê³  ê·¸ ë‚´ìš©ì„ ì •ë¦¬í•˜ê¸° ìœ„í•˜ì—¬ ì´ ê¸€ì„ ì‘ì„±í•œë‹¤.

> ìŠ¤í”„ë§ì€ **ìë°”** ì–¸ì–´ ê¸°ë°˜ì˜ í”„ë ˆì„ì›Œí¬ì´ê³ , ìë°”ëŠ” **ê°ì²´ ì§€í–¥ ì–¸ì–´**ì´ë‹¤.
> ê·¸ë ‡ë‹¤ë©´ ì¢‹ì€ ê°ì²´ ì§€í–¥ í”„ë¡œê·¸ë˜ë°ì´ë€ ë¬´ì—‡ì¼ê¹Œ?

#### ê°ì²´ ì§€í–¥ í”„ë¡œê·¸ë˜ë°(OOP)

- *ê°ì²´ ì§€í–¥ í”„ë¡œê·¸ë˜ë°(Object Oriented Programming)*ì€ ì»´í“¨í„° í”„ë¡œê·¸ë˜ë°ì˜ íŒ¨ëŸ¬ë‹¤ì„ ì¤‘ í•˜ë‚˜ì´ë‹¤.
- _OOP_ ëŠ” ì»´í“¨í„° í”„ë¡œê·¸ë¨ì„ ëª…ë ¹ì–´ì˜ ëª©ë¡ìœ¼ë¡œ ë³´ëŠ” ì‹œê°ì—ì„œ ë²—ì–´ë‚˜ ì—¬ëŸ¬ê°œì˜ ë…ë¦½ëœ ë‹¨ìœ„ì¸ **ê°ì²´**ë“¤ì˜ ëª¨ì„ìœ¼ë¡œ íŒŒì•…í•˜ê³ ì í•˜ëŠ” ê²ƒì´ë‹¤.
- ê°ê°ì˜ ê°ì²´ëŠ” ë©”ì‹œì§€ë¥¼ ì£¼ê³ ë°›ê³  ë°ì´í„°ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤.
- ê°ì²´ ì§€í–¥ í”„ë¡œê·¸ë˜ë°ì€ í”„ë¡œê·¸ë¨ì„ **ìœ ì—°**í•˜ê³  **ë³€ê²½**ì´ ìš©ì´í•˜ê²Œ ë§Œë“¤ê¸° ë•Œë¬¸ì— ëŒ€ê·œëª¨ ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œì— ë§ì´ ì‚¬ìš©ëœë‹¤.
- ì°¸ê³  - [ê°ì²´ ì§€í–¥ í”„ë¡œê·¸ë˜ë°(ìœ„í‚¤ë°±ê³¼)](https://ko.wikipedia.org/wiki/%EA%B0%9D%EC%B2%B4_%EC%A7%80%ED%96%A5_%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D)

#### ìœ ì—°í•˜ê³  ë³€ê²½ì´ ìš©ì´í•˜ë‹¤?

- ê·¸ë ‡ë‹¤ë©´, ìœ ì—°í•˜ê³  ë³€ê²½ì´ ìš©ì´í•˜ë‹¤ëŠ” í‘œí˜„ì€ ì–´ë–¤ ëœ»ì¼ê¹Œ? ë‚´ê°€ ì¢‹ì•„í•˜ëŠ” ë ˆê³ ëŠ” ë§¤ìš° ìœ ì—°í•˜ê³  ë³€ê²½ì´ ìš©ì´í•˜ë‹¤. ë¸”ëŸ­(ê°ì²´)ì„ ì¡°ë¦½í•˜ì—¬ í•˜ë‚˜ì˜ ë ˆê³  ì™„ì„±í’ˆì„ ë§Œë“œëŠ” ê²ƒì²˜ëŸ¼, í”„ë¡œê·¸ë˜ë°ì—ì„œëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ ìœ ì—°í•˜ê²Œ ë³€ê²½í•˜ë©´ì„œ ê°œë°œí•˜ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤ê³  ìƒê°í•œë‹¤.

#### í•µì‹¬ê°œë…ì€ ë¬´ì—‡ì¼ê¹Œ?

- ê°ì²´ ì§€í–¥ í”„ë¡œê·¸ë˜ë°ì€ ì¶”ìƒí™”, ìƒì†, **ë‹¤í˜•ì„±** ë“±ì´ ìˆìœ¼ë©° ì¶”ê°€ì ìœ¼ë¡œ ë‹¤ì¤‘ ìƒì† ë“±ì˜ íŠ¹ì§•ì´ ì¡´ì¬í•œë‹¤.
- ê·¸ ì¤‘ _OOP_ ì˜ í•µì‹¬ ê°œë…ì¸ **ë‹¤í˜•ì„±(Polymorphism)** ì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ê² ë‹¤.
- ìœ ì—°í•˜ê³  ë³€ê²½ì´ ìš©ì´í•œ ì¢‹ì€ ê°ì²´ ì§€í–¥ í”„ë¡œê·¸ë˜ë°ì„ í•˜ê¸° ìœ„í•´ì„œëŠ” ë‹¤í˜•ì„±ì´ ë§¤ìš° ì¤‘ìš”í•˜ë‹¤. ì™œ ë‹¤í˜•ì„±ì´ ì¤‘ìš”í• ê¹Œ?

#### ì—­í• ê³¼ êµ¬í˜„

- ë‹¤í˜•ì„±ì„ ì‰½ê²Œ ì´í•´í•˜ê¸° ìœ„í•´ ì‹¤ì„¸ê³„ì— ë¹„ìœ í•˜ì—¬ ìƒê°í•´ë³´ì.
- ìë™ì°¨ì— ë¹„ìœ í•˜ì—¬ ìƒê°í•´ë³´ì. ìë™ì°¨ì˜ ì¢…ë¥˜ëŠ” ë§¤ìš° ë‹¤ì–‘í•˜ë‹¤. í•˜ì§€ë§Œ ìš´ì „ìëŠ” ìë™ì°¨ ì‚¬ìš©ë°©ë²•ì— ëŒ€í•˜ì—¬ ì•Œê³  ìˆë‹¤ë©´ ìë™ì°¨ë¥¼ ìš´í–‰í•˜ëŠ”ë° ì•„ë¬´ëŸ° ì§€ì¥ì´ ì—†ë‹¤.
- **ìë™ì°¨(ì—­í• )**ë¥¼ **ìƒì‚°(êµ¬í˜„)**í•œ ê²ƒì´ë¼ ìƒê°í•˜ë©´ í¸í•˜ë‹¤. **ìƒì‚°(êµ¬í˜„)**ëœ ìë™ì°¨ëŠ” ë§¤ìš° ë‹¤ì–‘í•˜ì§€ë§Œ, ê·¸ê²ƒì´ **ìë™ì°¨(ì—­í• )**ë¼ëŠ” ê²ƒì€ ë³€í•¨ì´ ì—†ë‹¤.
- ì—­í• ê³¼ êµ¬í˜„ì„ ë¶„ë¦¬í•˜ë©´ ì„¸ìƒì´ ë‹¨ìˆœí•´ì§€ê³ , ìœ ì—°í•´ì§€ë©° **ë³€ê²½**ì´ ìš©ì´í•´ì§„ë‹¤.
- ë”°ë¼ì„œ **ìš°ë¦¬(í´ë¼ì´ì–¸íŠ¸)**ëŠ” **ì—­í• (ì¸í„°í˜ì´ìŠ¤)**ë§Œ ì•Œê³ ìˆìœ¼ë©´ êµ¬í˜„ì˜ êµ¬ì²´ì ì¸ ë‚´ìš©ì€ ëª°ë¼ë„ ìƒê´€ì—†ë‹¤. ì—­í• ë§Œ ì•Œê³ ìˆë‹¤ë©´ ìš°ë¦¬ëŠ” êµ¬í˜„ë‚´ìš©ì´ ë³€ê²½ë˜ë”ë¼ë„ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•ŠëŠ”ë‹¤. ë§ˆì¹˜ ìë™ì°¨ì˜ ì—”ì§„, ë³€ì†ê¸°, ì œì–´ ë“±ë“±ì˜ êµ¬ì²´ì ì¸ ìë™ì°¨ ë‚´ë¶€êµ¬ì¡° ë‚´ìš©ì„ ëª¨ë¥´ë”ë¼ë„ í´ë¼ì´ì–¸íŠ¸ëŠ” ì¸í„°í˜ì´ìŠ¤ë§Œ ì•Œê³ ìˆë‹¤ë©´ ìë™ì°¨ë¥¼ ìš´ì „í•˜ëŠ”ë° í° ë¬¸ì œëŠ” ì—†ì„ ê²ƒì´ë‹¤.

> ì—­í•  - ì¸í„°í˜ì´ìŠ¤  
> êµ¬í˜„ - êµ¬í˜„í´ë˜ìŠ¤

- ê°ì²´ë¥¼ ì„¤ê³„í•  ë•Œ **ì—­í• **ê³¼ **êµ¬í˜„**ì„ ë¶„ë¦¬í•˜ëŠ” ê²ƒì´ ë§¤ìš° ì¤‘ìš”í•˜ë‹¤.
- ìˆ˜ ë§ì€ ê°ì²´ í´ë¼ì´ì–¸íŠ¸ì™€ ê°ì²´ ì„œë²„ëŠ” ì„œë¡œ í˜‘ë ¥ê´€ê³„ë¥¼ ê°€ì§„ë‹¤.
- í´ë¼ì´ì–¸íŠ¸ë¥¼ ë³€ê²½í•˜ì§€ ì•Šê³ , ì„œë²„ì˜ êµ¬í˜„ ê¸°ëŠ¥ì„ ìœ ì—°í•˜ê²Œ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.

![](https://images.velog.io/images/shlee327/post/d56aa0da-11e3-4c69-b14d-e4f116e61fcc/3856679-200.png)

## ğŸŒˆ SOLID - ì¢‹ì€ ê°ì²´ ì§€í–¥ ì„¤ê³„ì˜ 5ê°€ì§€ ì›ì¹™

1. **SRP: ë‹¨ì¼ ì±…ì„ ì›ì¹™(single responsibility principle)**
   - í•œ í´ë˜ìŠ¤ëŠ” í•˜ë‚˜ì˜ ì±…ì„ë§Œ ê°€ì ¸ì•¼ í•œë‹¤.
2. **OCP: ê°œë°©-íì‡„ ì›ì¹™ (Open/closed principle)**
   - í™•ì¥ì—ëŠ” ì—´ë ¤ ìˆìœ¼ë‚˜ ë³€ê²½ì—ëŠ” ë‹«í˜€ ìˆì–´ì•¼ í•œë‹¤.
   - ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ë ¤ë©´ ì†ŒìŠ¤ì½”ë“œì˜ ìˆ˜ì •ì´ ë¶ˆê°€í”¼í•˜ë‹¤. ë‹¤í˜•ì„±ì„ ì´ìš©í•˜ë”ë¼ë„ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œë¥¼ ë³€ê²½í•´ì•¼ í•œë‹¤. ì´ëŠ” OCP ì›ì¹™ì— ìœ„ë°°ë˜ëŠ” ê²ƒì´ë‹¤. ì´ê²ƒì„ í•´ê²°í•˜ê¸° ìœ„í•´ì„œëŠ” ê°ì²´ë¥¼ ìƒì„±í•˜ê³ , ì—°ê´€ê´€ê³„ë¥¼ ë§ºì–´ì£¼ëŠ” ë³„ë„ì˜ ì¡°ë¦½, ì„¤ì •ìê°€ í•„ìš”í•˜ë‹¤.
3. **LSP: ë¦¬ìŠ¤ì½”í”„ ì¹˜í™˜ ì›ì¹™ (Liskov substitution principle)**
   - í”„ë¡œê·¸ë¨ì˜ ê°ì²´ëŠ” í”„ë¡œê·¸ë¨ì˜ ì •í™•ì„±ì„ ê¹¨ëœ¨ë¦¬ì§€ ì•Šìœ¼ë©´ì„œ í•˜ìœ„ íƒ€ì…ì˜ ì¸ìŠ¤í„´ìŠ¤ë¡œ ë°”ê¿€ ìˆ˜ ìˆì–´ì•¼ í•œë‹¤.
   - ë‹¤í˜•ì„±ì—ì„œ í•˜ìœ„ í´ë˜ìŠ¤ëŠ” ì¸í„°í˜ì´ìŠ¤ ê·œì•½ì„ ë‹¤ ì§€ì¼œì•¼ í•œë‹¤ëŠ” ê²ƒ, ë‹¤í˜•ì„±ì„ ì§€ì›í•˜ê¸° ìœ„ í•œ ì›ì¹™, ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ êµ¬í˜„ì²´ëŠ” ë¯¿ê³  ì‚¬ìš©í•˜ë ¤ë©´, ì´ ì›ì¹™ì´ í•„ìš”í•˜ë‹¤.
4. **ISP: ì¸í„°í˜ì´ìŠ¤ ë¶„ë¦¬ ì›ì¹™ (Interface segregation principle)**
   - íŠ¹ì • í´ë¼ì´ì–¸íŠ¸ë¥¼ ìœ„í•œ ì¸í„°í˜ì´ìŠ¤ ì—¬ëŸ¬ ê°œê°€ ë²”ìš© ì¸í„°í˜ì´ìŠ¤ í•˜ë‚˜ë³´ë‹¤ ë‚«ë‹¤.
5. **DIP: ì˜ì¡´ê´€ê³„ ì—­ì „ ì›ì¹™ (Dependency inversion principle)**
   - í”„ë¡œê·¸ë˜ë¨¸ëŠ” â€œì¶”ìƒí™”ì— ì˜ì¡´í•´ì•¼ì§€, êµ¬ì²´í™”ì— ì˜ì¡´í•˜ë©´ ì•ˆëœë‹¤.â€ ì˜ì¡´ì„± ì£¼ì…ì€ ì´ ì›ì¹™ ì„ ë”°ë¥´ëŠ” ë°©ë²• ì¤‘ í•˜ë‚˜ë‹¤. ì‰½ê²Œ ì´ì•¼ê¸°í•´ì„œ êµ¬í˜„ í´ë˜ìŠ¤ì— ì˜ì¡´í•˜ì§€ ë§ê³ , ì¸í„°í˜ì´ìŠ¤ì— ì˜ì¡´í•˜ë¼ëŠ” ëœ»ì´ë‹¤.

- ì°¸ê³  - [SOLID(ìœ„í‚¤ë°±ê³¼)](<https://ko.wikipedia.org/wiki/SOLID_(%EA%B0%9D%EC%B2%B4_%EC%A7%80%ED%96%A5_%EC%84%A4%EA%B3%84)>)

#### ì •ë¦¬

- ê°ì²´ì§€í–¥ì˜ í•µì‹¬ì€ **ë‹¤í˜•ì„±**ì´ë‹¤. ì¢‹ì€ ê°ì²´ ì§€í–¥ ì„¤ê³„ë¥¼ ìœ„í•´ì„œëŠ” ë‹¤í˜•ì„±ì´ ë§¤ìš° ì¤‘ìš”í•˜ë‹¤. í•˜ì§€ë§Œ ìˆœìˆ˜í•œ ìë°”ì½”ë“œì—ì„œ ë‹¤í˜•ì„± ë§Œìœ¼ë¡œëŠ” êµ¬í˜„ ê°ì²´ë¥¼ ë³€ê²½í•  ë•Œ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œë„ í•¨ê»˜ ë³€ê²½ëœë‹¤. ì¦‰, ìˆœìˆ˜í•œ ìë°”ì½”ë“œë¡œëŠ” **OCP(ê°œë°©-íì‡„ ì›ì¹™), DIP(ì˜ì¡´ê´€ê³„ ì—­ì „ ì›ì¹™)** ë¥¼ ì§€í‚¬ ìˆ˜ ì—†ë‹¤ëŠ” ëœ»ì´ë‹¤.
- ìˆœìˆ˜í•œ ìë°”ì½”ë“œë¡œ **OCP, DIP** ë¥¼ ì§€í‚¤ë©° ê°œë°œì„ ì§„í–‰í•˜ë©´, ê²°êµ­ ìŠ¤í”„ë§ì´ ì œê³µí•˜ëŠ” í•µì‹¬ ê¸°ìˆ ì— ê·¼ì ‘í•˜ê²Œ ëœë‹¤.

## â˜€ï¸ ìŠ¤í”„ë§ê³¼ ë‹¤í˜•ì„±

- ìš°ë¦¬ëŠ” **ì¢‹ì€ ê°ì²´ ì§€í–¥ ì›ì¹™(SOLID)**ì„ ì•Œì•„ë³´ì•˜ê³ , ìë°” ì–¸ì–´ì˜ í•µì‹¬ì¸ ë‹¤í˜•ì„±ì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ì•˜ë‹¤. ì´ê²ƒì´ ìŠ¤í”„ë§ê³¼ ì–´ë– í•œ ê´€ê³„ê°€ ìˆëŠ” ê²ƒì¼ê¹Œ?
- ìŠ¤í”„ë§ì€ ë‹¤í˜•ì„±ì„ ê·¹ëŒ€í™”í•´ì„œ ì´ìš©í•  ìˆ˜ ìˆë„ë¡ ë‹¤ìŒì˜ ê¸°ìˆ ì„ ì œê³µí•œë‹¤. ì œì–´ì˜ ì—­ì „, ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ ì´ìš©í•œ ì˜ì¡´ê´€ê³„ ì£¼ì… ë“±ì€ ë‹¤í˜•ì„±ì„ í™œìš©í•˜ì—¬ ì—­í• ê³¼ êµ¬í˜„ì„ í¸ë¦¬í•˜ê²Œ ë‹¤ë£° ìˆ˜ ìˆë„ë¡ ì§€ì›í•œë‹¤.
- ì¦‰, ìš°ë¦¬ê°€ ì•ì„œ ì•Œì•„ë³¸ **ê°ì²´ ì§€í–¥ ì„¤ê³„ ì›ì¹™(SOLID)**ì„ ì§€í‚¤ë©° ê°œë°œí•  ìˆ˜ ìˆë„ë¡ ìŠ¤í”„ë§ì—ì„œ ì§€ì›í•œë‹¤ëŠ” ê²ƒì´ë‹¤. **DI(Dependency Injection) ì»¨í…Œì´ë„ˆ**ëŠ” í´ë¼ì´ì–¸íŠ¸ì˜ ì½”ë“œ ë³€ê²½ì—†ì´ ê¸°ëŠ¥ì„ í™•ì¥í•˜ë„ë¡ ë„ì™€ì¤€ë‹¤.
- ì´ê²ƒì´ ìŠ¤í”„ë§ì˜ ë“±ì¥í•˜ê²Œ ëœ í•µì‹¬ê°œë…ì´ë©°, ì•ìœ¼ë¡œ ìŠ¤í”„ë§ì´ ì œê³µí•˜ëŠ” ê¸°ìˆ ì€ ì™œ ë“±ì¥í•˜ì˜€ëŠ”ì§€ ì•Œì•„ë³´ê³ , ì†ŒìŠ¤ì½”ë“œë¥¼ í†µí•˜ì—¬ ì•Œì•„ë³´ë„ë¡ í•˜ê² ë‹¤.(ê¸€ë¡œë§Œ ë‚´ìš©ì„ ì´í•´í•˜ê¸´ ì–´ë µê¸° ë•Œë¬¸ì—...)

> ì´ìƒì ìœ¼ë¡œëŠ” ëª¨ë“  ì„¤ê³„ì— **ì¸í„°í˜ì´ìŠ¤**ë¥¼ ë¶€ì—¬í•œë‹¤. í•˜ì§€ë§Œ ê¸°ëŠ¥ì„ í™•ì¥í•  ê°€ëŠ¥ì„±ì´ ì—†ë‹¤ë©´, êµ¬ì²´ í´ë˜ìŠ¤ë¥¼ ì§ì ‘ ì‚¬ìš©í•˜ê³  í–¥í›„ ê¼­ í•„ìš”í•  ë•Œ ë¦¬íŒ©í„°ë§í•´ì„œ ì¸í„°í˜ì´ìŠ¤ë¥¼ ë„ì…í•˜ëŠ” ê²ƒë„ ë°©ë²•ì´ë‹¤.

- ì°¸ê³  - [ê°ì²´ ì§€í–¥ í”„ë¡œê·¸ë˜ë°(ìœ„í‚¤ë°±ê³¼)](https://ko.wikipedia.org/wiki/%EA%B0%9D%EC%B2%B4_%EC%A7%80%ED%96%A5_%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D)

---

## ğŸ›  í”„ë¡œì íŠ¸ ìƒì„±

> í”„ë¡œì íŠ¸ëŠ” ë³¸ì¸ì˜ í™˜ê²½ì— ë§ì¶”ì–´ ì„¤ì •í•´ë„ ë¬´ê´€í•˜ë‹¤. ìŠ¤í”„ë§ ê´€ë ¨ ê¸°ìˆ ì„ í•™ìŠµí•˜ê¸° ìœ„í•œ ëª©ì ìœ¼ë¡œ í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•˜ì˜€ìœ¼ë©° ë¶ˆí•„ìš”í•œ ê°œë°œìš”ì†ŒëŠ” ì œì™¸í•˜ì˜€ë‹¤.

#### ì‚¬ì „ ì¤€ë¹„ë¬¼

- Java 11 ì„¤ì¹˜
- IntelliJ ì„¤ì¹˜
- [ìŠ¤í”„ë§ í”„ë¡œì íŠ¸ ìƒì„±](https://start.spring.io/)

- í”„ë¡œì íŠ¸ ì„ íƒ
  - Project: Gradle Project
  - Spring Boot: 2.3.x
  - Language: Java
  - Packaging: Jar
  - Java: 11
- Project Metadata
  - groupId: hello
  - artifactId: core
- Dependencies: ì„ íƒí•˜ì§€ ì•ŠëŠ”ë‹¤.

> ê¸°ì¡´ ìë°” ì½”ë“œë¡œ êµ¬í˜„í•˜ê³  ê´€ë ¨ ìƒí™©ì„ ì¬í˜„í•˜ê¸° ìœ„í•´ ìŠ¤í”„ë§ ê´€ë ¨ Dependenciesë¥¼ ì¶”ê°€í•˜ì§€ ì•ŠëŠ”ë‹¤.

#### ë¹„ì¦ˆë‹ˆìŠ¤ ìš”êµ¬ì‚¬í•­ê³¼ ì„¤ê³„

- íšŒì›
  - íšŒì›ì„ ê°€ì…í•˜ê³  ì¡°íšŒí•  ìˆ˜ ìˆë‹¤.
  - íšŒì›ì€ ì¼ë°˜ê³¼ VIP ë‘ ê°€ì§€ ë“±ê¸‰ì´ ìˆë‹¤.
  - íšŒì› ë°ì´í„°ëŠ” ìì²´ DBë¥¼ êµ¬ì¶•í•  ìˆ˜ ìˆê³ , ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ ì—°ë™í•  ìˆ˜ ìˆë‹¤. (ë¯¸í™•ì •)
- ì£¼ë¬¸ê³¼ í• ì¸ ì •ì±…
  - íšŒì›ì€ ìƒí’ˆì„ ì£¼ë¬¸í•  ìˆ˜ ìˆë‹¤.
  - íšŒì› ë“±ê¸‰ì— ë”°ë¼ í• ì¸ ì •ì±…ì„ ì ìš©í•  ìˆ˜ ìˆë‹¤.
  - í• ì¸ ì •ì±…ì€ ëª¨ë“  VIPëŠ” 1000ì›ì„ í• ì¸í•´ì£¼ëŠ” ê³ ì • ê¸ˆì•¡ í• ì¸ì„ ì ìš©í•´ë‹¬ë¼. (ë‚˜ì¤‘ì— ë³€ê²½ ë  ìˆ˜ ìˆë‹¤.)
  - í• ì¸ ì •ì±…ì€ ë³€ê²½ ê°€ëŠ¥ì„±ì´ ë†’ë‹¤. íšŒì‚¬ì˜ ê¸°ë³¸ í• ì¸ ì •ì±…ì„ ì•„ì§ ì •í•˜ì§€ ëª»í–ˆê³ , ì˜¤í”ˆ ì§ì „ê¹Œì§€ ê³ ë¯¼ì„ ë¯¸ë£¨ê³  ì‹¶ë‹¤. ìµœì•…ì˜ ê²½ìš° í• ì¸ì„ ì ìš©í•˜ì§€ ì•Šì„ ìˆ˜ë„ ìˆë‹¤. (ë¯¸í™•ì •)

> í˜„ì¬ ë¯¸í™•ì • ìš”ì†Œê°€ ì¡´ì¬í•˜ê³  ë³€ê²½ë  ìˆ˜ ìˆëŠ” ìš”ì†Œê°€ ì¡´ì¬í•œë‹¤. í•˜ì§€ë§Œ ìš°ë¦¬ëŠ” ê°œë°œì¼ì •ì— ë”°ë¼ ê°œë°œì„ ì§„í–‰í•´ì•¼ í•œë‹¤. ìš°ë¦¬ëŠ” ì¸í„°í˜ì´ìŠ¤ë¥¼ ì´ìš©í•˜ê³  êµ¬í˜„ë‚´ìš©ì€ ì–¸ì œë“  ë³€ê²½ì´ ê°€ëŠ¥í•˜ë„ë¡ ì„¤ê³„í•  ê²ƒì´ë‹¤.

#### íšŒì› ë„ë©”ì¸ ê°œë°œ

- íšŒì›ì„ ê°€ì…í•˜ê³  ì¡°íšŒí•  ìˆ˜ ìˆë‹¤.

```java
public interface MemberService {

    void join(Member member);

    Member findMember(Long memberId);
}
```

---

- íšŒì›ì€ ì¼ë°˜ê³¼ VIP ë‘ ê°€ì§€ ë“±ê¸‰ì´ ìˆë‹¤.

```java
public enum Grade {
    BASIC,
    VIP
}
```

---

- íšŒì› ë°ì´í„°ëŠ” ìì²´ DBë¥¼ êµ¬ì¶•í•  ìˆ˜ ìˆê³ , ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ ì—°ë™í•  ìˆ˜ ìˆë‹¤. (ë¯¸í™•ì •)

```java
public class MemoryMemberRepository implements MemberRepository{

    private static Map<Long, Member> store = new HashMap<>();

    @Override
    public void save(Member member) {
        store.put(member.getId(), member);
    }

    @Override
    public Member findById(Long memberId) {
        return store.get(memberId);
    }
}
```

> í˜„ì¬ DBê°€ ì •í•´ì§€ì§€ ì•Šì•„ íšŒì›ì€ ë©”ëª¨ë¦¬ ì €ì¥ì†Œë¥¼ ì´ìš©í•˜ì—¬ ìš°ì„  ê°œë°œì„ ì§„í–‰í•œë‹¤.

#### ì£¼ë¬¸ê³¼ í• ì¸ ì •ì±…

- íšŒì›ì€ ìƒí’ˆì„ ì£¼ë¬¸í•  ìˆ˜ ìˆë‹¤.

```java
public interface OrderService {
    Order createOrder(Long memberId, String itemName, int itemPrice);
}
```

- íšŒì› ë“±ê¸‰ì— ë”°ë¼ í• ì¸ ì •ì±…ì„ ì ìš©í•  ìˆ˜ ìˆë‹¤.

```java
public interface DiscountPolicy {
    int discount(Member member, int price);
}
```

- í• ì¸ ì •ì±…ì€ ëª¨ë“  VIPëŠ” 1000ì›ì„ í• ì¸í•´ì£¼ëŠ” ê³ ì • ê¸ˆì•¡ í• ì¸ì„ ì ìš©í•´ë‹¬ë¼. (ë‚˜ì¤‘ì— ë³€ê²½ ë  ìˆ˜ ìˆë‹¤.)

```java
public class FixDiscountPolicy implements DiscountPolicy{

    private int discountFixAmount = 1000;   //1000ì› í• ì¸

    @Override
    public int discount(Member member, int price) {
        if(member.getGrade() == Grade.VIP) {
            return discountFixAmount;
        } else {
            return 0;
        }
    }
}
```

- í• ì¸ ì •ì±…ì€ ë³€ê²½ ê°€ëŠ¥ì„±ì´ ë†’ë‹¤. íšŒì‚¬ì˜ ê¸°ë³¸ í• ì¸ ì •ì±…ì„ ì•„ì§ ì •í•˜ì§€ ëª»í–ˆê³ , ì˜¤í”ˆ ì§ì „ê¹Œì§€ ê³ ë¯¼ì„ ë¯¸ë£¨ê³  ì‹¶ë‹¤. ìµœì•…ì˜ ê²½ìš° í• ì¸ì„ ì ìš©í•˜ì§€ ì•Šì„ ìˆ˜ë„ ìˆë‹¤. (ë¯¸í™•ì •)

> ìš°ë¦¬ëŠ” `DiscountPolicy` ì¸í„°í˜ì´ìŠ¤ë¥¼ ì„¤ê³„í•œ ë’¤ `FixDiscountPolicy` ë¼ëŠ” êµ¬í˜„ì²´ë¥¼ í†µí•˜ì—¬ í• ì¸ ì •ì±…ì„ êµ¬í˜„í•œë‹¤. ë‚˜ì¤‘ì— í• ì¸ ì •ì±…ì´ ë³€ê²½ë˜ë”ë¼ë„ êµ¬í˜„ì²´ë§Œ ìƒˆë¡œ ê°œë°œí•˜ì—¬ êµì²´í•˜ê¸°ë§Œ í•˜ë©´ ëœë‹¤.

#### í…ŒìŠ¤íŠ¸

- íšŒì› í…ŒìŠ¤íŠ¸

```java
public class MemberServiceTest {

    MemberService memberService = new MemberServiceImpl();

    @Test
    void join() {
        //given
        Member member = new Member(1L, "memberA", Grade.VIP);

        //when
        memberService.join(member);
        Member findMember = memberService.findMember(1L);

        //then
        Assertions.assertThat(member).isEqualTo(findMember);
    }
}
```

- ì£¼ë¬¸ í…ŒìŠ¤íŠ¸

```java
public class OrderServiceTest {

    MemberService memberService = new MemberServiceImpl();
    OrderService orderService = new OrderServiceImpl();

    @Test
    void createOrder() {
        Long memberId = 1L;
        Member member = new Member(memberId, "memberA", Grade.VIP);
        memberService.join(member);

        Order order = orderService.createOrder(memberId, "itemA", 10000);
        Assertions.assertThat(order.getDiscountPrice()).isEqualTo(1000);
    }
}
```

#### ì¤‘ê°„ì •ë¦¬

- í˜„ì¬ ìš°ë¦¬ëŠ” ìŠ¤í”„ë§ì´ ì•„ë‹Œ ìë°” ì½”ë“œë§Œì„ ì´ìš©í•˜ì—¬ ìš”êµ¬ì‚¬í•­ì„ ê°œë°œí•´ì™”ë‹¤. ê·¸ë ‡ë‹¤ë©´ ì§€ê¸ˆ ì½”ë“œì˜ ë¬¸ì œì ì€ ë¬´ì—‡ì¼ê¹Œ?
- ìš”êµ¬ì‚¬í•­ì´ ë³€ê²½ëœë‹¤ë©´ ì½”ë“œì˜ ìˆ˜ì •ì´ í•„ìš”í•˜ë‹¤. `MemoryMemberRepository` -> `JdbcMemberRepository` ë¡œ ë³€ê²½ì´ í•„ìš”í•˜ë‹¤ë©´ ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” ë¶€ë¶„ì˜ ì½”ë“œ ìˆ˜ì •ì´ í•„ìš”í•˜ë‹¤.

```java
//MemberRepository memberRepository = new MemoryMemberRepository();
MemberRepository memberRepository = new JdbcMemberRepository();
```

- ì§€ê¸ˆì€ ì½”ë“œì˜ ë¬¸ì œì ì€ ì¸í„°í˜ì´ìŠ¤ì™€ êµ¬í˜„ì²´ë¥¼ ëª¨ë‘ ì˜ì¡´í•˜ê³  ìˆë‹¤ëŠ” ì ì´ë‹¤. ì¦‰, ìš”êµ¬ì‚¬í•­ì´ ë³€ê²½ë  ê²½ìš°ì—ëŠ” ì§ì ‘ ì½”ë“œë¥¼ ìˆ˜ì •í•´ì•¼ í•œë‹¤.
- ìš°ë¦¬ê°€ ì¢‹ì€ ê°ì²´ ì§€í–¥ì„¤ê³„ë¥¼ í•˜ì˜€ë‹¤ë©´ ì¸í„°í˜ì´ìŠ¤ì—ë§Œ ì˜ì¡´í•˜ê²Œ ê°œë°œí•˜ê³ , ìš”êµ¬ì‚¬í•­ì— ë§ì¶”ì–´ êµ¬í˜„ì²´ë§Œ ê°œë°œí•˜ì—¬ ê°ˆì•„ë¼ìš°ë©´ ëœë‹¤.

#### ìƒˆë¡œìš´ í• ì¸ ì •ì±… ì¶”ê°€

- ê·¸ë ‡ë‹¤ë©´ `FixDiscountPolicy` ê³ ì • í• ì¸ ì •ì±…ì„ `RateDiscountPolicy` ì •ë¥  í• ì¸ ì •ì±…ìœ¼ë¡œ ë³€ê²½í•´ë³´ë„ë¡ í•˜ì. ìš°ë¦¬ëŠ” ì¸í„°í˜ì´ìŠ¤ ì„¤ê³„ì— ë”°ë¼ êµ¬í˜„ì²´ë§Œ ê°œë°œí•˜ë©´ ëœë‹¤.

```java
public class RateDiscountPolicy implements DiscountPolicy{

    private int discountPercent = 10;

    @Override
    public int discount(Member member, int price) {
        if (member.getGrade() == Grade.VIP) {
            return price * discountPercent / 100;
        } else {
            return 0;
        }
    }
}
```

- ìƒˆë¡œìš´ í• ì¸ ì •ì±…ì„ ê°œë°œí•˜ì˜€ê³  ìš°ë¦¬ëŠ” ì½”ë“œë¶€ë¶„ì„ **ìˆ˜ì •**í•´ì•¼ í•œë‹¤.

```java
public class OrderServiceImpl implements OrderService {
    //private final DiscountPolicy discountPolicy = new FixDiscountPolicy();
    private final DiscountPolicy discountPolicy = new RateDiscountPolicy();
}
```

#### ë¬¸ì œì 

- ì½”ë“œë¥¼ ìˆ˜ì •í•´ì•¼í•œë‹¤ëŠ” ê²ƒì€ ê·¸ê²ƒì„ ì˜ì¡´í•˜ê³  ìˆë‹¤ëŠ” ëœ»ì´ë‹¤. `OrderServiceImpl`ì€ ì¶”ìƒ(ì¸í„°í˜ì´ìŠ¤) ë¿ë§Œ ì•„ë‹ˆë¼ êµ¬ì²´(êµ¬í˜„) í´ë˜ìŠ¤ì—ë„ ì˜ì¡´í•˜ê³  ìˆë‹¤.

> ì¶”ìƒ(ì¸í„°í˜ì´ìŠ¤) ì˜ì¡´: `DiscountPolicy`  
> êµ¬ì²´(êµ¬í˜„) í´ë˜ìŠ¤: `FixDiscountPolicy` , `RateDiscountPolicy`

- ì§€ê¸ˆ ì½”ë“œëŠ” ê¸°ëŠ¥ì„ í™•ì¥í•´ì„œ ë³€ê²½í•˜ë©´, í´ë¼ì´ì–¸íŠ¸ ì½”ë“œì— ì˜í–¥ì„ ì¤€ë‹¤. ë”°ë¼ì„œ *OCP*ë¥¼ ìœ„ë°˜í•œë‹¤. ìš°ë¦¬ëŠ” ì¸í„°í˜ì´ìŠ¤ì—ë§Œ ì˜ì¡´í•˜ë„ë¡ ìˆ˜ì •í•´ì•¼ í•œë‹¤.

```java
public class OrderServiceImpl implements OrderService {
    //private final DiscountPolicy discountPolicy = new FixDiscountPolicy();
    private DiscountPolicy discountPolicy;
}
```

- ìœ„ ì½”ë“œì—ì„œëŠ” `DiscountPolicy` ì¸í„°í˜ì´ìŠ¤ë§Œ ì˜ì¡´í•˜ë„ë¡ ìˆ˜ì •í•˜ì˜€ë‹¤. í•˜ì§€ë§Œ ì§€ê¸ˆìƒíƒœì—ì„œëŠ” êµ¬í˜„ì²´ê°€ ì¡´ì¬í•˜ì§€ ì•Šê¸°ë•Œë¬¸ì— _null pointer exception_ ì´ ë°œìƒí•  ê²ƒì´ë‹¤.

- ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œëŠ” ì™¸ë¶€ì—ì„œ êµ¬í˜„ê°ì²´ë¥¼ ëŒ€ì‹  ìƒì„±í•˜ê³  ì£¼ì…í•´ì£¼ì–´ì•¼ í•œë‹¤.(**ì¤‘ìš”**)

#### ì„¤ì •í´ë˜ìŠ¤ ìƒì„±

- êµ¬í˜„ ê°ì²´ë¥¼ ìƒì„±í•˜ê³ , ì—°ê²°í•˜ëŠ” ì±…ì„ì„ ê°€ì§€ëŠ” ë³„ë„ì˜ ì„¤ì • í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì.

```java
public class AppConfig {
    public MemberService memberService() {
        return new MemberServiceImpl(new MemoryMemberRepository());
    }
}
```

- `MemberServiceImpl` ìƒì„±ìë¥¼ ì´ìš©í•˜ì—¬ ì˜ì¡´ê´€ê³„ ì£¼ì…

```java
private final MemberRepository memberRepository;

public MemberServiceImpl(MemberRepository memberRepository) {
    this.memberRepository = memberRepository;
}
```

- `MemberServiceImpl` ì˜ ì½”ë“œì—ì„œëŠ” `MemberRepository` ì¸í„°í˜ì´ìŠ¤ì—ë§Œ ì˜ì¡´í•˜ê³  ìˆë‹¤. êµ¬í˜„ê°ì²´ëŠ” `AppConfig` ì—ì„œ `MemoryMemberRepository` ìƒì„±í•˜ê³  ì˜ì¡´ê´€ê³„ë¥¼ ì£¼ì…í•˜ê³  ìˆë‹¤.
- ìš°ë¦¬ëŠ” `AppConfig`ë¥¼ í†µí•˜ì—¬ êµ¬í˜„ê°ì²´ë¥¼ ì£¼ì…í•˜ê³  ê´€ë¦¬í•˜ë„ë¡ ì½”ë“œë¥¼ ìˆ˜ì •í–ˆë‹¤. `MemberServiceImpl` ì—ì„œ êµ¬í˜„ê°ì²´ë¥¼ ì§ì ‘ ìƒì„±í•˜ì—¬ ì‚¬ìš©í•˜ì§€ ì•Šê³  ì™¸ë¶€ì—ì„œ ì˜ì¡´ê´€ê³„ë¥¼ ì£¼ì…ë°›ì•„ì„œ ì‚¬ìš©í•˜ê²Œ ëœë‹¤. ì–´ë–¤ ì˜ì¡´ì„±ì´ ì£¼ì…ë˜ëŠ”ì§€ ëª¨ë¥´ë”ë¼ë„ ìš°ë¦¬ëŠ” ì½”ë“œ ì‹¤í–‰ì—ë§Œ ì¶©ì‹¤í•˜ë©´ ëœë‹¤.
- êµ¬í˜„ê°ì²´ê°€ ë³€ê²½ë˜ë”ë¼ë„ `AppConfig` ì—ì„œ ê´€ë¦¬í•˜ëŠ” ë¶€ë¶„ë§Œ ìˆ˜ì •í•˜ë©´ ëœë‹¤. `AppConfig`ì˜ ë“±ì¥ìœ¼ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ í¬ê²Œ ì‚¬ìš© ì˜ì—­ê³¼, ê°ì²´ë¥¼ ìƒì„±í•˜ê³  êµ¬ì„±(Configuration)í•˜ëŠ” ì˜ì—­ìœ¼ë¡œ ë¶„ë¦¬ë˜ì—ˆë‹¤.

- ì´ì œ ìƒˆë¡œìš´ í• ì¸ ì •ì±…ì„ ì ìš©í•´ë³´ì

```java
public class AppConfig {

    public OrderService orderService() {
        return new OrderServiceImpl(memberRepository(),
                discountPolicy());
    }

    public DiscountPolicy discountPolicy() {
        //return new FixDiscountPolicy();
        return new RateDiscountPolicy();
    }
}
```

- `AppConfig` ì—ì„œ `RateDiscountPolicy` êµ¬í˜„ê°ì²´ë¥¼ ë°”ê¾¸ì–´ ì£¼ë©´ ëœë‹¤. ì½”ë“œë¥¼ ì‹¤í–‰í•˜ëŠ” ì˜ì—­ê³¼ êµ¬ì„±ì„ ì±…ì„ì§€ëŠ” ì—­í• ì„ êµ¬ë¶„í•˜ì˜€ê¸° ë–„ë¬¸ì— ì• í”Œë¦¬ì¼€ì´ì…˜ í™•ì¥ê³¼ ë³€ê²½ì´ ìš©ì´í•´ì¡Œë‹¤.
- ì‹¤í–‰ë¶€ë¶„ì˜ ì†ŒìŠ¤ ì½”ë“œë¥¼ ìˆ˜ì •í•˜ì§€ ì•Šê³  ì„¤ì •ë§Œ ë³€ê²½í•˜ë©´ ë˜ê¸° ë•Œë¬¸ì´ë‹¤.

#### â—ï¸SOILD ì ìš©í•˜ì—¬ ì •ë¦¬

- SRP ë‹¨ì¼ ì±…ì„ ì›ì¹™

  - ê¸°ì¡´ì—ëŠ” êµ¬í˜„ ê°ì²´ë¥¼ ìƒì„±, ì—°ê²°, ì‹¤í–‰í•˜ëŠ” ë“±ì˜ ë‹¤ì–‘í•œ ì±…ì„ì´ ì¡´ì¬í–ˆë‹¤. ìš°ë¦¬ëŠ” `AppConfig` ë¥¼ í†µí•˜ì—¬ êµ¬í˜„ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ì—°ê²°í•˜ë„ë¡ ë§Œë“¤ì—ˆê³ , ë‹¤ë¥¸ í´ë¼ì´ì–¸íŠ¸ ê°ì²´ëŠ” ì‹¤í–‰ë§Œì„ ë‹´ë‹¹í•˜ë„ë¡ ë§Œë“¤ì—ˆë‹¤. ì´ë ‡ê²Œ í•˜ë‚˜ì˜ í´ë˜ìŠ¤ëŠ” í•˜ë‚˜ì˜ ì±…ì„ë§Œ ê°€ì§€ë„ë¡ ìˆ˜ì •í•˜ì˜€ë‹¤.

- DIP ì˜ì¡´ê´€ê³„ ì—­ì „ ì›ì¹™

  - ì¶”ìƒí™”ì— ì˜ì¡´í•´ì•¼í•˜ë©° êµ¬ì²´í™”ì— ì˜ì¡´í•˜ë©´ ì•ˆëœë‹¤.
  - ê¸°ì¡´ì— ì¸í„°í˜ì´ìŠ¤ì™€ êµ¬í˜„ê°ì²´ ëª¨ë‘ ì˜ì¡´ë„ë¡ ê°œë°œë˜ì–´ ìˆì—ˆì§€ë§Œ `AppConfig`ë¥¼ ìƒì„±í•˜ê³  ì˜ì¡´ê´€ê³„ë¥¼ ì£¼ì…í•˜ê²Œ ë³€ê²½í•˜ì—¬ DIP ë¬¸ì œë¥¼ í•´ê²°í•˜ì˜€ë‹¤.

- OCP ê°œë°©-íì‡„ ì›ì¹™
  - "ì†Œí”„íŠ¸ì›¨ì–´ ìš”ì†ŒëŠ” í™•ì¥ì—ëŠ” ì—´ë ¤ìˆìœ¼ë‚˜ ë³€ê²½ì—ëŠ” ë‹«í˜€ ìˆì–´ì•¼ í•œë‹¤." ì´ ë¬¸êµ¬ê°€ êµ‰ì¥íˆ í—·ê°ˆë ¸ëŠ”ë° ì–´ëŠì •ë„ ë¬¸êµ¬ë¥¼ ì´í•´í•  ìˆ˜ ìˆì—ˆë‹¤.
  - `AppConfig`ê°€ ì˜ì¡´ê´€ê³„ë¥¼ ì„¤ì •í•˜ì—¬ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œì— ì£¼ì…í•˜ê¸° ë•Œë¬¸ì— í´ë¼ì´ì–¸íŠ¸ ì½”ë“œë¥¼ ë³€ê²½í•˜ì§€ ì•Šì•„ë„ ëœë‹¤.
  - ë”°ë¼ì„œ ìƒˆë¡œìš´ ìš”ì†Œë¥¼ ê°œë°œí•˜ì—¬ë„ ì‚¬ìš© ì˜ì—­ì˜ ë³€ê²½ì€ ë‹«í˜€ ìˆë‹¤.

## â­ï¸ ì •ë¦¬í•˜ë©°...

- ë‚˜ëŠ” ìŠ¤í”„ë§ì´ ì™œ í•„ìš”í•œì§€ ê¶ê¸ˆí–ˆê³ , í•µì‹¬ê°œë…ì´ ë¬´ì—‡ì¸ì§€ ì•Œê³ ì‹¶ì—ˆë‹¤. ìë°”ì˜ ì¢‹ì€ ê°ì²´ ì§€í–¥ ì›ì¹™ì„ ì¤€ìˆ˜í•˜ê¸° ìœ„í•´ ì‚¬ìš©ëœ ê¸°ìˆ ì´ ì§€ê¸ˆì˜ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ, ë¹ˆ, ì˜ì¡´ê´€ê³„ ë“±ì„ ë§Œë“¤ì—ˆë‹¤ê³  ìƒê°í•œë‹¤. ì¶”ìƒí™”(ì¸í„°í˜ì´ìŠ¤), êµ¬í˜„ì²´(í´ë˜ìŠ¤)ë¥¼ ì´ìš©í•˜ì—¬ ìš°ë¦¬ëŠ” ìœ ì—°í•˜ê³  ë³€ê²½ì´ ìš©ì´í•˜ê²Œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ê°œë°œí•  ìˆ˜ ìˆë‹¤.
- ê¸°ì¡´ ìë°” ì½”ë“œë¥¼ ì´ìš©í•˜ì—¬ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ì˜€ë‹¤. ìŠ¤í”„ë§ ê´€ë ¨ ê¸°ìˆ ì„ ì‚¬ìš©í•˜ì§€ ì•Šê³  ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ê°œë°œí•˜ë ¤ê³  ë³´ë‹ˆ ì¢‹ì€ ê°ì²´ ì§€í–¥ ì„¤ê³„ë¥¼ ìœ„ë°˜í•˜ëŠ” ê²½ìš°ê°€ ë§ì´ ë°œìƒí•˜ì˜€ë‹¤. ë‚´ìš©ì„ ì •ë¦¬í•˜ë©° ì´í•´ë˜ì—ˆë‹¤ê³  ìƒê°í–ˆì§€ë§Œ ë‹¤ì‹œ ê¸€ì„ ì‘ì„±í•˜ëŠ” ê³¼ì •ì—ì„œ í—·ê°ˆë¦¬ê¸°ë„ í–ˆê³  ë‚´ìš©ì´ ë– ì˜¤ë¥´ì§€ ì•Šê¸°ë„ í–ˆë‹¤.
- ì˜ˆì œë¡œ ì‘ì„±í•œ ì½”ë“œëŠ” ì–´ë ¤ìš´ ì½”ë“œëŠ” ì•„ë‹ˆë‹¤. ìë°”ë¥¼ ì‚¬ìš©í•œë‹¤ë©´ ëˆ„êµ¬ë‚˜ ì´í•´í•  ìˆ˜ ìˆëŠ” ìˆ˜ì¤€ì˜ ì½”ë“œë¼ê³  ìƒê°í•œë‹¤. í•˜ì§€ë§Œ ì—¬ê¸°ì„œ ìš°ë¦¬ì—ê²Œ í•„ìš”í•œ ê°œë…ê³¼ ì•ìœ¼ë¡œ í•™ìŠµí•  ìŠ¤í”„ë§ì˜ í•µì‹¬ê°œë…ì„ ì•Œ ìˆ˜ ìˆì—ˆë‹¤. `AppConfig`ì²˜ëŸ¼ ì˜ì¡´ê´€ê³„ë¥¼ ì„¤ì •í•˜ëŠ” ì—­í• ì„ ìŠ¤í”„ë§ì—ì„œëŠ” **DIì»¨í…Œì´ë„ˆ** ë¼ê³  í•œë‹¤. **DIì»¨í…Œì´ë„ˆê°€** ì™œ í•„ìš”í•œì§€, ë¬´ìŠ¨ ì—­í• ì„ í•˜ëŠ”ì§€ ì´í•´í•  ìˆ˜ ìˆì—ˆë‹¤. ì´ì œ ê¸°ì¡´ ìë°”ì½”ë“œì—ì„œ ìŠ¤í”„ë§ìœ¼ë¡œ ì „í™˜í•˜ë©° ê°œë…ì„ ìµíˆê³  ì—­í• ì— ëŒ€í•˜ì—¬ í•™ìŠµí•˜ë„ë¡ í•  ê²ƒì´ë‹¤.

> **í•™ìŠµì— ë„ì›€ì´ ë˜ì—ˆë˜ ìë£Œ**
>
> - [ê¹€ì˜í•œ - ìŠ¤í”„ë§ í•µì‹¬ ì›ë¦¬(ì¸í”„ëŸ°)](https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81-%ED%95%B5%EC%8B%AC-%EC%9B%90%EB%A6%AC-%EA%B8%B0%EB%B3%B8%ED%8E%B8#)
> - [ê°ì²´ ì§€í–¥ í”„ë¡œê·¸ë˜ë°(ìœ„í‚¤ë°±ê³¼)](https://ko.wikipedia.org/wiki/%EA%B0%9D%EC%B2%B4_%EC%A7%80%ED%96%A5_%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D)
> - [SOLID(ìœ„í‚¤ë°±ê³¼)](<https://ko.wikipedia.org/wiki/SOLID_(%EA%B0%9D%EC%B2%B4_%EC%A7%80%ED%96%A5_%EC%84%A4%EA%B3%84)>)
> - [ê°ì²´ ì§€í–¥ í”„ë¡œê·¸ë˜ë°(ìœ„í‚¤ë°±ê³¼)](https://ko.wikipedia.org/wiki/%EA%B0%9D%EC%B2%B4_%EC%A7%80%ED%96%A5_%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D)
> - [ìŠ¤í”„ë§ í”„ë¡œì íŠ¸ ìƒì„±](https://start.spring.io/)

## ğŸ›  ìŠ¤í”„ë§ ê¸°ë°˜ìœ¼ë¡œ ë³€ê²½

- [ì´ì „ ê¸€ - ìŠ¤í”„ë§ ê¸°ì´ˆì™€ ì›ë¦¬ë¥¼ ì•Œì•„ë³´ìğŸŒ³](https://velog.io/@shlee327/%EC%8A%A4%ED%94%84%EB%A7%81-%EA%B8%B0%EC%B4%88%EC%99%80-%EC%9B%90%EB%A6%AC%EB%A5%BC-%EC%95%8C%EC%95%84%EB%B3%B4%EC%9E%90)
- ì´ì „ì— ì‘ì„±ëœ ìë°” ê¸°ë°˜ ì½”ë“œì—ì„œ ìŠ¤í”„ë§ ê¸°ë°˜ì˜ ì½”ë“œë¡œ ë³€ê²½í•˜ë ¤ í•œë‹¤. ì´ë¥¼ í†µí•˜ì—¬ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ, ìŠ¤í”„ë§ ë¹ˆì˜ ì‚¬ìš©ë°©ë²•ì„ ìµíˆë ¤ í•œë‹¤.

#### ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„±

```java
@Configuration
public class AppConfig {

    @Bean
    public MemberService memberService() {
        return new MemberServiceImpl(memberRepository());
    }

    @Bean
    public MemberRepository memberRepository() {
        return new MemoryMemberRepository();
    }

    @Bean
    public OrderService orderService() {
        return new OrderServiceImpl(memberRepository(), discountPolicy());
    }

    @Bean
    public DiscountPolicy discountPolicy() {
        //return new FixDiscountPolicy();
        return new RateDiscountPolicy();
    }
}
```

- `@Configuration`, `@Bean`ì„ ì¶”ê°€
- `AppConfig`ì— ì„¤ì •ì„ êµ¬ì„±í•œë‹¤ëŠ” ëœ»ì˜ `@Configuration` ì„ ë¶™ì—¬ì¤€ë‹¤.
- ê° ë©”ì„œë“œì— `@Bean` ì„ ë¶™ì—¬ì¤€ë‹¤. ì´ë ‡ê²Œ í•˜ë©´ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡í•œë‹¤.
- ìš°ë¦¬ëŠ” ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì—ì„œ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡ëœ ê°ì²´ë¥¼ ë¶ˆëŸ¬ì™€ ì‚¬ìš©í•  ê²ƒì´ë‹¤.

```java
ApplicationContext ac = new AnnotationConfigApplicationContext(AppConfig.class);
        MemberService memberService = ac.getBean("memberService", MemberService.class);
```

- ìŠ¤í”„ë§ ë¹ˆì€ `@Bean` ì´ ë¶™ì€ ë©”ì„œë“œì˜ ëª…ì„ ìŠ¤í”„ë§ ë¹ˆì˜ ì´ë¦„ìœ¼ë¡œ ì‚¬ìš©í•œë‹¤.
- `AppConfig` ì—ì„œ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡ëœ `memberService`ì„ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì—ì„œ `getBean` ë©”ì†Œë“œë¥¼ í†µí•´ í•„ìš”í•œ ìŠ¤í”„ë§ ë¹ˆì„ ì°¾ì„ ìˆ˜ ìˆë‹¤.
- ê¸°ì¡´ì—ëŠ” ê°œë°œìê°€ ì§ì ‘ ìë°” ì½”ë“œë¡œ ëª¨ë“  ê²ƒì„ í–ˆë‹¤ë©´ ì´ì œë¶€í„°ëŠ” ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ê°ì²´ë¥¼ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡í•˜ê³ , ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì—ì„œ ìŠ¤í”„ë§ ë¹ˆì„ ì°¾ì•„ì„œ ì‚¬ìš©í•˜ë„ë¡ ë³€ê²½ë˜ì—ˆë‹¤.

> ì˜¤íˆë ¤ ì½”ë“œê°€ ì•½ê°„ ë” ë³µì¡í•´ì§„ ê²ƒ ê°™ì€ë°, ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ ì‚¬ìš©í•˜ë©´ ì–´ë–¤ ì¥ì ì´ ìˆì„ê¹Œ? ì•„ì§ì€ ì˜ ëª¨ë¥´ê² ë‹¤...

```java
ApplicationContext ac = new AnnotationConfigApplicationContext(AppConfig.class);
```

- `ApplicationContext` ëŠ” ì¸í„°í˜ì´ìŠ¤ì´ë©° `AnnotationConfigApplicationContext` ëŠ” êµ¬í˜„ì²´ì´ë‹¤. AnnotationConfig ê¸°ë°˜ì˜ ì„¤ì • íŒŒì¼ì„ ì½ì–´ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ë“±ë¡í•˜ëŠ” ì—­í• ì„ í•œë‹¤.
- ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ ìƒì„±í•  ë•ŒëŠ” êµ¬ì„± ì •ë³´ë¥¼ ì§€ì •í•´ì£¼ì–´ì•¼ í•œë‹¤. ì—¬ê¸°ì„œëŠ” AppConfig.class ë¥¼ êµ¬ì„± ì •ë³´ë¡œ ì§€ì •í–ˆë‹¤.

```java
ApplicationContext ac = new GenericXmlApplicationContext(appConfig.xml);
```

- ì´ëŸ¬í•œ ì„¤ê³„ ë•ë¶„ì— ìŠ¤í”„ë§ì€ ë‹¤ì–‘í•œ ì„¤ì •íŒŒì¼ì„ ë“±ë¡í•  ìˆ˜ ìˆë‹¤. ì˜ˆë¥¼ë“¤ë©´ `GenericXmlApplicationContext` ëŠ” xml ì„¤ì •íŒŒì¼ì„ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ë“±ë¡í•˜ëŠ” ì—­í• ì„ í•œë‹¤.

> ì°¸ê³  : ì •í™•íˆëŠ” ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ ë¶€ë¥¼ ë•Œ BeanFactory, ApplicationContext ë¡œ êµ¬ë¶„í•´ì„œ ì´ì•¼ê¸° í•œë‹¤. BeanFactory ë¥¼ ì§ì ‘ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ëŠ” ê±°ì˜ ì—†ìœ¼ë¯€ë¡œ ì¼ë°˜ì ìœ¼ë¡œ ApplicationContext ë¥¼ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¼ í•œë‹¤.

## âœ… í…ŒìŠ¤íŠ¸

#### ì»¨í…Œì´ë„ˆì— ë“±ë¡ëœ ëª¨ë“  ë¹ˆ ì¡°íšŒ

```java
class ApplicationContextInfoTest {

    AnnotationConfigApplicationContext ac = new AnnotationConfigApplicationContext(AppConfig.class);

    @Test
    @DisplayName("ëª¨ë“  ë¹ˆ ì¶œë ¥í•˜ê¸°")
    void findAllBean() {
        //ìŠ¤í”„ë§ì— ë“±ë¡ëœ ëª¨ë“  ë¹ˆ ì´ë¦„ì„ ì¡°íšŒí•œë‹¤.
        String[] beanDefinitionNames = ac.getBeanDefinitionNames();
        for (String beanDefinitionName : beanDefinitionNames) {
            //ë¹ˆ ì´ë¦„ìœ¼ë¡œ ë¹ˆ ê°ì²´(ì¸ìŠ¤í„´ìŠ¤)ë¥¼ ì¡°íšŒí•œë‹¤.
            Object bean = ac.getBean(beanDefinitionName);
            System.out.println("name = " + beanDefinitionName + " object = " + bean);
        }
    }

    @Test
    @DisplayName("ì• í”Œë¦¬ì¼€ì´ì…˜ ë¹ˆ ì¶œë ¥í•˜ê¸°")
    void findApplicationBean() {
        //ìŠ¤í”„ë§ì— ë“±ë¡ëœ ëª¨ë“  ë¹ˆ ì´ë¦„ì„ ì¡°íšŒí•œë‹¤.
        String[] beanDefinitionNames = ac.getBeanDefinitionNames();
        for (String beanDefinitionName : beanDefinitionNames) {
            BeanDefinition beanDefinition = ac.getBeanDefinition(beanDefinitionName);

            //ROLE_APPLICATION : ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©ìê°€ ì •ì˜í•œ ë¹ˆ
            //ROLE_INFRASTRUCTURE : ìŠ¤í”„ë§ì´ ë‚´ë¶€ì—ì„œ ì‚¬ìš©í•˜ëŠ” ë¹ˆ
            if (beanDefinition.getRole() == BeanDefinition.ROLE_APPLICATION) {
                //ë¹ˆ ì´ë¦„ìœ¼ë¡œ ë¹ˆ ê°ì²´(ì¸ìŠ¤í„´ìŠ¤)ë¥¼ ì¡°íšŒí•œë‹¤.
                Object bean = ac.getBean(beanDefinitionName);
                System.out.println("name = " + beanDefinitionName + " object = " + bean);
            }
        }
    }
}
```

#### ìŠ¤í”„ë§ ë¹ˆ ì¡°íšŒ - ê¸°ë³¸

- `ac.getBean(ë¹ˆì´ë¦„, íƒ€ì…)`
- `ac.getBean(íƒ€ì…)`
- ì¡°íšŒ ëŒ€ìƒ ìŠ¤í”„ë§ ë¹ˆì´ ì—†ìœ¼ë©´ ì˜ˆì™¸ ë°œìƒ - `NoSuchBeanDefinitionException`

```java
class ApplicationContextBasicFindTest {

    AnnotationConfigApplicationContext ac = new AnnotationConfigApplicationContext(AppConfig.class);

    @Test
    @DisplayName("ë¹ˆ ì´ë¦„ìœ¼ë¡œ ì¡°íšŒ")
    void findBeanByName() {
        MemberService memberService = ac.getBean("memberService", MemberService.class);
        assertThat(memberService).isInstanceOf(MemberServiceImpl.class);
    }

    @Test
    @DisplayName("ì´ë¦„ ì—†ì´ íƒ€ì…ìœ¼ë¡œë§Œ ì¡°íšŒ")
    void findBeanByType() {
        MemberService memberService = ac.getBean(MemberService.class);
        assertThat(memberService).isInstanceOf(MemberServiceImpl.class);
    }

    @Test
    @DisplayName("êµ¬ì²´ íƒ€ì…ìœ¼ë¡œ ì¡°íšŒ")
    void findBeanByName2() {
        MemberServiceImpl memberService = ac.getBean("memberService", MemberServiceImpl.class);
        assertThat(memberService).isInstanceOf(MemberServiceImpl.class);
    }

    @Test
    @DisplayName("ë¹ˆ ì´ë¦„ìœ¼ë¡œ ì¡°íšŒ X")
    void findBeanByNameX() {
        assertThrows(NoSuchBeanDefinitionException.class,
                () -> ac.getBean("xxxxx", MemberService.class));
    }
}
```

#### ìŠ¤í”„ë§ ë¹ˆ ì¡°íšŒ - ë™ì¼í•œ íƒ€ì…ì´ ë‘˜ ì´ìƒ

- íƒ€ì…ìœ¼ë¡œ ì¡°íšŒì‹œ ê°™ì€ íƒ€ì…ì˜ ìŠ¤í”„ë§ ë¹ˆì´ ë‘˜ ì´ìƒì´ë©´ ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤. ì´ë•ŒëŠ” ë¹ˆ ì´ë¦„ì„ ì§€ì •í•˜ì.
- `ac.getBeansOfType()` ì„ ì‚¬ìš©í•˜ë©´ í•´ë‹¹ íƒ€ì…ì˜ ëª¨ë“  ë¹ˆì„ ì¡°íšŒí•  ìˆ˜ ìˆë‹¤.

```java
class ApplicationContextSameBeanFindTest {

    //íŠ¹ë³„í•œ ì¼€ì´ìŠ¤ë¥¼ ì§€ì •í•˜ê¸° ìœ„í•´ SameBeanConfig ì„ì‹œ ì ìš©
    AnnotationConfigApplicationContext ac = new AnnotationConfigApplicationContext(SameBeanConfig.class);

    @Test
    @DisplayName("íƒ€ì…ìœ¼ë¡œ ì¡°íšŒì‹œ ê°™ì€ íƒ€ì…ì´ ë‘˜ ì´ìƒ ìˆìœ¼ë©´, ì¤‘ë³µ ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤")
    void findBeanByTypeDuplicate() {
        assertThrows(NoUniqueBeanDefinitionException.class,
                () -> ac.getBean(MemberRepository.class));
    }

    @Test
    @DisplayName("íƒ€ì…ìœ¼ë¡œ ì¡°íšŒì‹œ ê°™ì€ íƒ€ì…ì´ ë‘˜ ì´ìƒ ìˆìœ¼ë©´, ë¹ˆ ì´ë¦„ì„ ì§€ì •í•˜ë©´ ëœë‹¤")
    void findBeanByName() {
        MemberRepository memberRepository = ac.getBean("memberRepository1", MemberRepository.class);
        assertThat(memberRepository).isInstanceOf(MemberRepository.class);
    }

    @Test
    @DisplayName("íŠ¹ì • íƒ€ì…ì„ ëª¨ë‘ ì¡°íšŒí•˜ê¸°")
    void findAllBeanByType() {
        Map<String, MemberRepository> beansOfType = ac.getBeansOfType(MemberRepository.class);
        for (String key : beansOfType.keySet()) {
            System.out.println("key = " + key + " value = " + beansOfType.get(key));
        }
        System.out.println("beansOfType = " + beansOfType);
        assertThat(beansOfType.size()).isEqualTo(2);
    }

    @Configuration
    static class SameBeanConfig {

        @Bean
        public MemberRepository memberRepository1() {
            return new MemoryMemberRepository();
        }

        @Bean
        public MemberRepository memberRepository2() {
            return new MemoryMemberRepository();
        }
    }
}
```

#### ìŠ¤í”„ë§ ë¹ˆ ì¡°íšŒ - ìƒì† ê´€ê³„

- ë¶€ëª¨ íƒ€ì…ìœ¼ë¡œ ì¡°íšŒí•˜ë©´, ìì‹ íƒ€ì…ë„ í•¨ê»˜ ì¡°íšŒí•œë‹¤.
- ê·¸ë˜ì„œ ëª¨ë“  ìë°” ê°ì²´ì˜ ìµœê³  ë¶€ëª¨ì¸ Object íƒ€ì…ìœ¼ë¡œ ì¡°íšŒí•˜ë©´, ëª¨ë“  ìŠ¤í”„ë§ ë¹ˆì„ ì¡°íšŒí•œë‹¤.

```java
public class ApplicationContextExtendsFindTest {

    //íŠ¹ë³„í•œ ì¼€ì´ìŠ¤ë¥¼ ì§€ì •í•˜ê¸° ìœ„í•´ TestConfig ì„ì‹œ ì ìš©
    AnnotationConfigApplicationContext ac = new AnnotationConfigApplicationContext(TestConfig.class);

    @Test
    @DisplayName("ë¶€ëª¨ íƒ€ì…ìœ¼ë¡œ ì¡°íšŒì‹œ, ìì‹ì´ ë‘˜ ì´ìƒ ìˆìœ¼ë©´, ì¤‘ë³µ ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤")
    void findBeanByParentTypeDuplicate() {
        assertThrows(NoUniqueBeanDefinitionException.class,
                () -> ac.getBean(DiscountPolicy.class));
    }

    @Test
    @DisplayName("ë¶€ëª¨ íƒ€ì…ìœ¼ë¡œ ì¡°íšŒì‹œ, ìì‹ì´ ë‘˜ ì´ìƒ ìˆìœ¼ë©´, ë¹ˆ ì´ë¦„ì„ ì§€ì •í•˜ë©´ ëœë‹¤")
    void findBeanByParentTypeBeanName() {
        DiscountPolicy rateDiscountPolicy = ac.getBean("rateDiscountPolicy", DiscountPolicy.class);
        assertThat(rateDiscountPolicy).isInstanceOf(RateDiscountPolicy.class);
    }

    @Test
    @DisplayName("íŠ¹ì • í•˜ìœ„ íƒ€ì…ìœ¼ë¡œ ì¡°íšŒí•˜ê¸°")
    void findBeanBySubType() {
        FixDiscountPolicy bean = ac.getBean(FixDiscountPolicy.class);
        assertThat(bean).isInstanceOf(FixDiscountPolicy.class);
    }

    @Test
    @DisplayName("ë¶€ëª¨ íƒ€ì…ìœ¼ë¡œ ëª¨ë‘ ì¡°íšŒí•˜ê¸°")
    void findAllBeanByParentType() {
        Map<String, DiscountPolicy> beansOfType = ac.getBeansOfType(DiscountPolicy.class);
        for (String key : beansOfType.keySet()) {
            System.out.println("key = " + key + " value = " + beansOfType.get(key));
        }

        assertThat(beansOfType.size()).isEqualTo(2);
    }

    @Test
    @DisplayName("ë¶€ëª¨ íƒ€ì…ìœ¼ë¡œ ëª¨ë‘ ì¡°íšŒí•˜ê¸° - Object")
    void findAllBeanByObjectType() {
        Map<String, Object> beansOfType = ac.getBeansOfType(Object.class);
        for (String key : beansOfType.keySet()) {
            System.out.println("key = " + key + " value = " + beansOfType.get(key));
        }
    }

    @Configuration
    static class TestConfig {

        @Bean
        public DiscountPolicy rateDiscountPolicy() {
            return new RateDiscountPolicy();
        }

        @Bean
        public DiscountPolicy fixDiscountPolicy() {
            return new FixDiscountPolicy();
        }
    }
}
```

## â­ï¸ ì •ë¦¬í•˜ë©°...

- ê¸°ì¡´ì˜ ìë°”ì½”ë“œ ê¸°ë°˜ ì„¤ì •ì •ë³´ë¥¼ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡í•˜ëŠ” ì‘ì—…ì„ ì‹œì‘ìœ¼ë¡œ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ í…ŒìŠ¤íŠ¸ í•´ë´¤ë‹¤.
- `@Configuration`, `@Bean` ì€ ì–´ë…¸í…Œì´ì…˜ ê¸°ë°˜ì˜ ìë°”ì„¤ì • ì •ë³´ë¥¼ ë“±ë¡í•  ë•Œ ì‚¬ìš©í•œë‹¤. ë”°ë¼ì„œ ì»¨í…Œì´ë„ˆì— ì„¤ì • ì •ë³´ë¥¼ ë“±ë¡í•  ë•Œ `AnnotationConfigApplicationContext` êµ¬í˜„ê°ì²´ë¥¼ ì‚¬ìš©í–ˆë‹¤.
- ë§Œì•½ xml í˜•ì‹ì˜ ì„¤ì • ì •ë³´ë¥¼ ë“±ë¡í•˜ë ¤ë©´ `GenericXmlApplicationContext` êµ¬í˜„ê°ì²´ë¥¼ ì´ìš©í•˜ë©´ ëœë‹¤. ì´ì²˜ëŸ¼ ìŠ¤í”„ë§ì—ì„œëŠ” ë‹¤ì–‘í•œ ì„¤ì • í˜•ì‹ì„ ì§€ì›í•˜ê³  ìˆë‹¤. ì´ê²ƒì´ ê°€ëŠ¥í•œ ì´ìœ ëŠ”?
- `BeanDefinition` ì„ ë¹ˆ ì„¤ì • ë©”íƒ€ì •ë³´ë¼ í•œë‹¤. ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” ì´ ë©”íƒ€ì •ë³´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìŠ¤í”„ë§ ë¹ˆì„ ìƒì„±í•œë‹¤. `BeanDefinition` ì€ ì¶”ìƒí™”(ì¸í„°í˜ì´ìŠ¤) ë˜ì–´ìˆë‹¤. ë”°ë¼ì„œ ë‹¤ì–‘í•œ í˜•ì‹ì˜ êµ¬í˜„ê°ì²´ë¥¼ í†µí•˜ì—¬ ì„¤ì •ì„ ì½ì„ ìˆ˜ ìˆë‹¤.
- `AnnotationConfigApplicationContext`ëŠ” `AnnotatedBeanDefinitionReader`ë¥¼ ì´ìš©í•˜ì—¬ `AppConfig.class` ë¥¼ ì½ê³  `BeanDefinition` ì„ ìƒì„±í•œë‹¤.

![](https://images.velog.io/images/shlee327/post/e329faca-9d2f-46e8-a0d9-2e1ae8bb1eee/core_%E2%80%93_AnnotationConfigApplicationContext_java__Gradle__org_springframework_spring-context_5_3_8_-2.png)

- ì‹¤ì œë¡œ `BeanDefinition` ë¥¼ ì´ìš©í•˜ì—¬ ê°œë°œí•˜ëŠ” ì¼ì€ ì ë‹¤ê³  í•˜ì§€ë§Œ ë™ì‘ì›ë¦¬ì— ëŒ€í•˜ì—¬ ì•Œê³  ìˆë‹¤ë©´ ìŠ¤í”„ë§ ê´€ë ¨ ì˜¤í”ˆì†ŒìŠ¤ë¥¼ ë³¼ ë•Œ ì›ë¦¬ë¥¼ ì´í•´í•  ìˆ˜ ìˆì„ ê²ƒì´ë‹¤.

> **í•™ìŠµì— ë„ì›€ì´ ë˜ì—ˆë˜ ìë£Œ**
>
> - [ê¹€ì˜í•œ - ìŠ¤í”„ë§ í•µì‹¬ ì›ë¦¬(ì¸í”„ëŸ°)](https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81-%ED%95%B5%EC%8B%AC-%EC%9B%90%EB%A6%AC-%EA%B8%B0%EB%B3%B8%ED%8E%B8#)

> [ì´ì „ ê¸€ - ìŠ¤í”„ë§ ê¸°ì´ˆì™€ ì›ë¦¬ë¥¼ ì•Œì•„ë³´ìğŸŒ³](https://velog.io/@shlee327/%EC%8A%A4%ED%94%84%EB%A7%81-%EA%B8%B0%EC%B4%88%EC%99%80-%EC%9B%90%EB%A6%AC%EB%A5%BC-%EC%95%8C%EC%95%84%EB%B3%B4%EC%9E%90) ì—ì„œ ì‘ì„±ëœ ì˜ˆì œì½”ë“œë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë‚´ìš©ì„ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.

## ì˜¤ëŠ˜ì˜ ì£¼ì œëŠ”?

- ìŠ¤í”„ë§ì€ íƒœìƒì´ ê¸°ì—…ìš© ì˜¨ë¼ì¸ ì„œë¹„ìŠ¤ ê¸°ìˆ ì„ ì§€ì›í•˜ê¸° ìœ„í•´ íƒ„ìƒí–ˆë‹¤. ëŒ€ë¶€ë¶„ì˜ ìŠ¤í”„ë§ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ê³ , ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ë³´í†µ ì—¬ëŸ¬ ê³ ê°ì´ ë™ì‹œì— ìš”ì²­ì„ í•œë‹¤.
- í˜„ì¬ ì½”ë“œëŠ” ì´ˆë‹¹ 1,000ë²ˆì˜ ìš”ì²­ì´ ë“¤ì–´ì˜¤ë©´ 1,000ê°œì˜ ê°ì²´ë¥¼ ìƒì„±í•˜ì—¬ ì‚¬ìš©í•˜ê²Œ ëœë‹¤. ì¦‰, ìš”ì²­ì´ ìˆì„ë•Œë§ˆë‹¤ ê°™ì€ ê°ì²´ë¥¼ ìƒˆë¡œ ë§Œë“¤ê³  ìˆë‹¤ëŠ” ëœ»ì´ë‹¤.
- ìš°ë¦¬ëŠ” ë©”ëª¨ë¦¬ì˜ ë‚­ë¹„ì—†ì´ ê°œë°œì„ í•˜ê³ ì‹¶ë‹¤. ì‹±ê¸€í†¤ì„ ì´ìš©í•˜ì—¬ íš¨ìœ¨ì ì¸ ì½”ë“œë¥¼ ë§Œë“¤ì–´ë³´ì.
- ë‹¤ìŒ ì½”ë“œë¥¼ í†µí•˜ì—¬ í™•ì¸í•´ë³´ì.

```java
@Configuration
public class AppConfig {

    @Bean
    public MemberService memberService() {
        return new MemberServiceImpl(new MemoryMemberRepository());
    }
}
```

```java
public class SingletonTest {

    @Test
    @DisplayName("ìŠ¤í”„ë§ ì—†ëŠ” ìˆœìˆ˜í•œ DI ì»¨í…Œì´ë„ˆ")
    void pureContainer() {
        AppConfig appConfig = new AppConfig();

        //ìš”ì²­ì´ ë“¤ì–´ì˜¬ë–„ë§ˆë‹¤ ê°ì²´ë¥¼ ìƒì„±
        MemberService memberService1 = appConfig.memberService();
        MemberService memberService2 = appConfig.memberService();

        //ì°¸ì¡°ê°’ì´ ë‹¤ë¥¸ ê²ƒì„ í™•ì¸
        System.out.println("memberService1 = " + memberService1);
        System.out.println("memberService2 = " + memberService2);

        assertThat(memberService1).isNotSameAs(memberService2);
    }
}
```

#### ê·¸ë˜ì„œ ê²°ê³¼ê°€ ë­ì•¼?

![](https://images.velog.io/images/shlee327/post/366d3a0f-563b-453b-b29d-c9699b7e1d85/core_%E2%80%93_README_md__core_.png)

- `memberService1`, `memberService2`ëŠ” ê°™ì€ êµ¬í˜„ê°ì²´ì´ë‹¤. ë§Œì•½ ìš”ì²­ì´ ë“¤ì–´ì˜¬ë•Œë§ˆë‹¤ ê°ì²´ë¥¼ ìƒì„±í•˜ê²Œ ëœë‹¤ë©´ ì´ì²˜ëŸ¼ ê°™ì€ êµ¬í˜„ê°ì²´ë“¤ì´ ê³„ì† ì¶”ê°€ë  ê²ƒì´ë‹¤.
- í…ŒìŠ¤íŠ¸ ê²°ê³¼ë¥¼ ì£¼ëª©í•´ë³´ì. `@43e4ca52`, `@137782a7` ì€ ìƒì„±ëœ ê°ì²´ê°€ ì°¸ì¡°í•˜ê³  ìˆëŠ” ì£¼ì†Œê°’ì´ë‹¤. ê°’ì´ ë‹¤ë¥´ë‹¤. ì´ ëœ»ì€ ë˜‘ê°™ì€ êµ¬í˜„ê°ì²´ì´ì§€ë§Œ ì„œë¡œ ë‹¤ë¥¸ ê³³ì„ ì°¸ì¡°í•˜ê³  ìˆë‹¤ëŠ” ê²ƒì´ë‹¤.
- ì¦‰, ë¶ˆí•„ìš”í•œ ë©”ëª¨ë¦¬ê°€ ë‚­ë¹„ëœë‹¤ëŠ” ëœ»ì´ë‹¤.
- ì´ê²ƒì„ í•´ê²°í•˜ê¸° ìœ„í•˜ì—¬ 1ê°œì˜ êµ¬í˜„ê°ì²´ë§Œ ìƒì„±í•˜ê³  ê³µìœ í•˜ì—¬ ì‚¬ìš©í•˜ë„ë¡ ë§Œë“¤ ê²ƒì´ë‹¤. ë‹¤ë¥¸ ë§ë¡œ ìš°ë¦¬ëŠ” **ì‹±ê¸€í†¤ íŒ¨í„´**ì— ëŒ€í•˜ì—¬ ì•Œì•„ë³¼ ê²ƒì´ë‹¤.

## ì‹±ê¸€í†¤ íŒ¨í„´

![](https://upload.wikimedia.org/wikipedia/commons/f/fb/Singleton_UML_class_diagram.svg)

- ì°¸ê³  - [ì‹±ê¸€í†¤ íŒ¨í„´(ìœ„í‚¤ë°±ê³¼)](https://ko.wikipedia.org/wiki/%EC%8B%B1%EA%B8%80%ED%84%B4_%ED%8C%A8%ED%84%B4)
- ì‹±ê¸€í†¤ íŒ¨í„´(Singleton pattern)ì„ ë”°ë¥´ëŠ” í´ë˜ìŠ¤ëŠ”, ìƒì„±ìê°€ ì—¬ëŸ¬ ì°¨ë¡€ í˜¸ì¶œë˜ë”ë¼ë„ ì‹¤ì œë¡œ ìƒì„±ë˜ëŠ” ê°ì²´ëŠ” í•˜ë‚˜ì´ê³  ìµœì´ˆ ìƒì„± ì´í›„ì— í˜¸ì¶œëœ ìƒì„±ìëŠ” ìµœì´ˆì˜ ìƒì„±ìê°€ ìƒì„±í•œ ê°ì²´ë¥¼ ë¦¬í„´í•œë‹¤.
- ì‹±ê¸€í†¤ íŒ¨í„´ì„ ìƒì„±í•˜ëŠ” ì½”ë“œë¥¼ ì‚´í´ë³´ì.

```java
public class SingletonService {

    //1. static ì˜ì—­ì— ê°ì²´ë¥¼ ë”± 1ê°œë§Œ ìƒì„±í•´ë‘”ë‹¤.
    private static final SingletonService instance = new SingletonService();

    //2. public ìœ¼ë¡œ ì—´ì–´ì„œ ê°ì²´ ì¸ìŠ¤í„°ìŠ¤ê°€ í•„ìš”í•˜ë©´ ì´ static ë©”ì„œë“œë¥¼ í†µí•´ì„œë§Œ ì¡°íšŒí•˜ë„ë¡ í—ˆìš©í•œë‹¤.
    public static SingletonService getInstance() {
        return instance;
    }

    //3. ìƒì„±ìë¥¼ private ìœ¼ë¡œ ì„ ì–¸í•´ì„œ ì™¸ë¶€ì—ì„œ new í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•œ ê°ì²´ ìƒì„±ì„ ëª»í•˜ê²Œ ë§‰ëŠ”ë‹¤.
    private SingletonService() {
    }
}
```

- static ì˜ì—­ì— ê°ì²´ë¥¼ ë”± 1ê°œë§Œ ìƒì„±í•´ë‘”ë‹¤.
- ì‹±ê¸€í†¤ íŒ¨í„´ì€ private ìƒì„±ìë¥¼ ì‚¬ìš©í•´ì„œ ì™¸ë¶€ì—ì„œ ì„ì˜ë¡œ new í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•˜ì§€ ëª»í•˜ë„ë¡ ë§‰ì•„ì•¼ í•œë‹¤.(ì¤‘ìš”)
- static ì˜ì—­ì— ê°ì²´(instance)ë¥¼ ìƒì„±í•˜ê³ , ë§Œì•½ í•„ìš”í•˜ë‹¤ë©´ getInstance() ë©”ì†Œë“œë¥¼ í†µí•´ì„œë§Œ ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë‹¤.
- í…ŒìŠ¤íŠ¸ë¥¼ í•´ë³´ì.

```java
public class SingletonTest {

    @Test
    @DisplayName("ì‹±ê¸€í†¤ íŒ¨í„´ì„ ì ìš©í•œ ê°ì²´ ì‚¬ìš©")
    void singletonServiceTest() {
        SingletonService instance1 = SingletonService.getInstance();
        SingletonService instance2 = SingletonService.getInstance();

        System.out.println("instance1 = " + instance1);
        System.out.println("instance2 = " + instance2);

        assertThat(instance1).isSameAs(instance2);
    }

}
```

- ì‹¤í–‰ê²°ê³¼
  ![](https://images.velog.io/images/shlee327/post/4b3e7819-8fe2-4fa1-a686-416ff4e45f17/core_%E2%80%93_SingletonTest_java__core_test_.png)

- ì‹¤í–‰ê²°ê³¼ ê°™ì€ ì°¸ì¡°ê°’(@9f8ea4d)ì„ ê°€ì§€ê³  ìˆëŠ” ê°ì²´ë§Œ ë¦¬í„´ë˜ì—ˆë‹¤.
- ì‹±ê¸€í†¤ íŒ¨í„´ì„ ì ìš©í•˜ë©´ ìš”ì²­ì´ ì˜¬ ë•Œ ë§ˆë‹¤ ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, ì´ë¯¸ ë§Œë“¤ì–´ì§„ ê°ì²´ë¥¼ ê³µìœ í•´ì„œ íš¨ìœ¨ì ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ ì‹±ê¸€í†¤ íŒ¨í„´ì€ ë‹¤ìŒê³¼ ê°™ì€ ìˆ˜ ë§ì€ ë¬¸ì œì ë“¤ì„ ê°€ì§€ê³  ìˆë‹¤.

#### ë¬¸ì œì 

- ì‹±ê¸€í†¤ íŒ¨í„´ì„ êµ¬í˜„í•˜ëŠ” ì½”ë“œ ìì²´ê°€ ë§ì´ ë“¤ì–´ê°„ë‹¤.
- ì˜ì¡´ê´€ê³„ìƒ í´ë¼ì´ì–¸íŠ¸ê°€ êµ¬ì²´ í´ë˜ìŠ¤ì— ì˜ì¡´í•œë‹¤.(DIPë¥¼ ìœ„ë°˜)
- í´ë¼ì´ì–¸íŠ¸ê°€ êµ¬ì²´ í´ë˜ìŠ¤ì— ì˜ì¡´í•´ì„œ OCP ì›ì¹™ì„ ìœ„ë°˜í•  ê°€ëŠ¥ì„±ì´ ë†’ë‹¤.
- ì‹±ê¸€í†¤ì€ ë§Œë“¤ì–´ì§€ëŠ” ë°©ì‹ì´ ì œí•œì ì´ê¸° ë•Œë¬¸ì— í…ŒìŠ¤íŠ¸ì—ì„œ ì‚¬ìš©ë  ë•Œ mock ì˜¤ë¸Œì íŠ¸ ë“±ìœ¼ë¡œ ëŒ€ì²´í•˜ê¸°ê°€ í˜ë“¤ë‹¤.
- ì„œë²„ í™˜ê²½ì—ì„œëŠ” ì‹±ê¸€í†¤ì´ í•˜ë‚˜ë§Œ ë§Œë“¤ì–´ì§€ëŠ” ê²ƒì„ ë³´ì¥í•˜ì§€ ëª»í•œë‹¤. ì—¬ëŸ¬ê°œì˜ JVMì— ë¶„ì‚°ë¼ì„œ ì„¤ì¹˜ê°€ ë˜ëŠ” ê²½ìš°ì—ë„ ê°ê° ë…ë¦½ì ìœ¼ë¡œ ì˜¤ë¸Œì íŠ¸ê°€ ìƒê¸°ê¸° ë•Œë¬¸ì— ì‹±ê¸€í†¤ìœ¼ë¡œì„œì˜ ê°€ì¹˜ê°€ ë–¨ì–´ì§„ë‹¤.
- ì°¸ê³  - [ì‹±ê¸€í†¤ íŒ¨í„´ì˜ ë‹¨ì (https://ssoco.tistory.com/65)](https://ssoco.tistory.com/65)

> í•˜ì§€ë§Œ ìš°ë¦¬ëŠ” ì‹±ê¸€í†¤ ë¬¸ì œì— ëŒ€í•œ ê³ ë¯¼ì„ í•  í•„ìš”ê°€ ì—†ë‹¤. ìš°ë¦¬ê°€ í•™ìŠµí•œ ìŠ¤í”„ë§ ë¹ˆì´ ë°”ë¡œ ì‹±ê¸€í†¤ìœ¼ë¡œ ê´€ë¦¬ë˜ëŠ” ë¹ˆì´ë‹¤.

## ì‹±ê¸€í†¤ ì»¨í…Œì´ë„ˆ

- ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” ì‹±ê¸€í„´ íŒ¨í„´ì„ ì ìš©í•˜ì§€ ì•Šì•„ë„, ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‹±ê¸€í†¤ìœ¼ë¡œ ê´€ë¦¬í•œë‹¤.
- ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” ì‹±ê¸€í†¤ ì»¨í…Œì´ë„ˆ ì—­í• ì„ í•œë‹¤. ì´ë ‡ê²Œ ì‹±ê¸€í†¤ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ê´€ë¦¬í•˜ëŠ” ê¸°ëŠ¥ì„ ì‹±ê¸€í†¤ ë ˆì§€ìŠ¤íŠ¸ë¦¬ë¼ í•œë‹¤.
- ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì˜ ì´ëŸ° ê¸°ëŠ¥ ë•ë¶„ì— ì‹±ê¸€í„´ íŒ¨í„´ì˜ ëª¨ë“  ë‹¨ì ì„ í•´ê²°í•˜ë©´ì„œ ê°ì²´ë¥¼ ì‹±ê¸€í†¤ìœ¼ë¡œ ìœ ì§€í•  ìˆ˜ ìˆë‹¤.
  - ì‹±ê¸€í†¤ íŒ¨í„´ì„ ìœ„í•œ ì½”ë“œê°€ ë“¤ì–´ê°€ì§€ ì•Šì•„ë„ ëœ
  - DIP, OCP, í…ŒìŠ¤íŠ¸, private ìƒì„±ìë¡œ ë¶€í„° ììœ ë¡­ê²Œ ì‹±ê¸€í†¤ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

> ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ë•ë¶„ì— ìš”ì²­ì´ ì˜¬ ë•Œ ë§ˆë‹¤ ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, ì´ë¯¸ ë§Œë“¤ì–´ì§„ ê°ì²´ë¥¼ ê³µìœ  í•´ì„œ íš¨ìœ¨ì ìœ¼ë¡œ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

```java
public class SingletonTest {

    @Test
    @DisplayName("ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì™€ ì‹±ê¸€í†¤")
    void springContainer() {

        //ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì—ì„œ ë¹ˆ ì¡°íšŒí•˜ë„ë¡ ìˆ˜ì •
        ApplicationContext ac = new AnnotationConfigApplicationContext(AppConfig.class);

        MemberService memberService1 = ac.getBean("memberService", MemberService.class);
        MemberService memberService2 = ac.getBean("memberService", MemberService.class);

        //ì°¸ì¡°ê°’ì´ ê°™ì€ ê²ƒì„ í™•ì¸
        System.out.println("memberService1 = " + memberService1);
        System.out.println("memberService2 = " + memberService2);

        assertThat(memberService1).isSameAs(memberService2);
    }

}
```

- ì‹¤í–‰ê²°ê³¼
  ![](https://images.velog.io/images/shlee327/post/255ef035-6932-42dc-ad8e-b70061c006ee/core_%E2%80%93_README_md__core_-2.png)

- ê¸°ì¡´ì˜ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì—ì„œ ìƒì„±ëœ ë¹ˆì„ ì¡°íšŒí•´ë³´ë©´, ì—¬ëŸ¬ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ì£¼ì…í•´ë„ ê°™ì€ ê°ì²´ê°€ ì£¼ì…ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.
- ì´ë²ˆ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì´ìš©í•˜ì—¬ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ ì‹±ê¸€í†¤ ì»¨í…Œì´ë„ˆ ì—­í• ì„ í•˜ëŠ”ì§€ ì§ì ‘ í™•ì¸í•  ìˆ˜ ìˆì—ˆë‹¤.
- í•˜ì§€ë§Œ ì‹±ê¸€í†¤ ë°©ì‹ì„ ì‚¬ìš©í•  ë•ŒëŠ” ì£¼ì˜í•´ì•¼í•  ì‚¬í•­ì´ ì¡´ì¬í•œë‹¤.

## ì‹±ê¸€í†¤ ë°©ì‹ì˜ ì£¼ì˜ì 

- ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ í•˜ë‚˜ë§Œ ìƒì„±í•´ì„œ ê³µìœ í•˜ëŠ” ì‹±ê¸€í†¤ ë°©ì‹ì€ ì—¬ëŸ¬ í´ë¼ì´ì–¸íŠ¸ê°€ í•˜ë‚˜ì˜ ê°™ì€ ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê³µìœ í•˜ê¸° ë•Œë¬¸ì— ì‹±ê¸€í†¤ ê°ì²´ëŠ” ìƒíƒœë¥¼ `ìœ ì§€(stateful)`í•˜ê²Œ ì„¤ê³„í•˜ë©´ ì•ˆëœë‹¤.
- `ë¬´ìƒíƒœ(stateless)`ë¡œ ì„¤ê³„í•´ì•¼ í•œë‹¤. ì¦‰, ê°’ì„ ìœ ì§€í•˜ê±°ë‚˜ ë³€ê²½í•´ì•¼í•˜ëŠ” í•„ë“œê°€ ìˆìœ¼ë©´ ì•ˆëœë‹¤.
- ì‰¬ìš´ ì˜ˆì‹œë¡œ A ê³ ê°ì´ ì£¼ë¬¸ì„ í•˜ê³ , B ê³ ê°ì´ ì£¼ë¬¸ì„ í•˜ê²Œë˜ë©´ ì£¼ë¬¸ë‚´ì—­ì´ ë’¤ë°”ë€” ìˆ˜ ìˆë‹¤.
- A, B ê³ ê°ì´ ê°™ì€ ê°ì²´ë¥¼ ê³µìœ í•˜ê¸° ë•Œë¬¸ì— ìƒíƒœê°’ì„ ë³€ê²½í•˜ëŠ” í•„ë“œê°€ ì¡´ì¬í•œë‹¤ë©´ ìƒíƒœê°€ ê³µìœ ë˜ëŠ” ë¬¸ì œê°€ ë°œìƒí•œë‹¤.
- ì½”ë“œë¡œ ì‚´í´ë³´ì.

```java
public class StatefulService {

    private int price;

    public void order(String name, int price) {
        System.out.println("name = " + name + " price = " + price);

        this.price = price;
    }

    public int getPrice() {
        return price;
    }
}
```

- ì„ì‹œë¡œ ì£¼ë¬¸(order) ì„œë¹„ìŠ¤ë¥¼ ë§Œë“¤ì—ˆë‹¤.
- ì´ê³³ì—ì„œ price í•„ë“œëŠ” ìƒíƒœë¥¼ ìœ ì§€í•˜ë„ë¡ ì„¤ê³„ë˜ì–´ ìˆë‹¤.
  - `this.price = price;`
- ë”°ë¼ì„œ ê°€ê²©(price)ì€ ê³µìœ ë˜ê³  ìˆë‹¤.
- ì´ì œ í…ŒìŠ¤íŠ¸ë¥¼ í•´ë³´ì.

```java
public class StatefulServiceTest {

    @Test
    @DisplayName("ìƒíƒœë¥¼ ìœ ì§€í•˜ëŠ” ì‹±ê¸€í†¤ ë°©ì‹ì˜ ë¬¸ì œì ")
    void statefulServiceSingleton() {
        ApplicationContext ac = new AnnotationConfigApplicationContext(TestConfig.class);
        StatefulService statefulService1 = ac.getBean("statefulService", StatefulService.class);
        StatefulService statefulService2 = ac.getBean("statefulService", StatefulService.class);

        //ThreadA : A ì‚¬ìš©ìê°€ 10000ì› ì£¼ë¬¸
        statefulService1.order("userA", 10000);

        //ThreadB : B ì‚¬ìš©ìê°€ 20000ì› ì£¼ë¬¸
        statefulService2.order("userB", 20000);

        //ThreadA : A ì‚¬ìš©ìê°€ ì£¼ë¬¸ ê¸ˆì•¡ ì¡°íšŒ
        int price1 = statefulService1.getPrice();
        System.out.println("price1 = " + price1);

        assertThat(price1).isEqualTo(20000);
    }

    //í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ ì„ì‹œ ì„¤ì •
    static class TestConfig {

        @Bean
        public StatefulService statefulService() {
            return new StatefulService();
        }

    }

}
```

- í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ `TestConfig`ë¥¼ ìƒì„±í•˜ê³  `@Bean` íƒœê·¸ë¡œ `ApplicationContext`ì— ë“±ë¡í•˜ì˜€ë‹¤.
- ì´ì œ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” `StatefulService`ë¥¼ ì‹±ê¸€í†¤ ê°ì²´ë¡œ ê´€ë¦¬í•œë‹¤.
  > ![](https://images.velog.io/images/shlee327/post/dabb175c-a6f8-4e1a-b90b-fb4fe22d736f/core_%E2%80%93_StatefulServiceTest_java__core_test_.png)
- ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì—ì„œ ì¡°íšŒí•œ `StatefulService`ëŠ” ê°™ì€ ê°ì²´ì´ë‹¤. ë”°ë¡œ ìƒì„±í•˜ì˜€ì§€ë§Œ ê°™ì€ ì°¸ì¡°ê°’ì„ í†µí•˜ì—¬ `price` í•„ë“œì— ì ‘ê·¼í•œë‹¤.
- A ì‚¬ìš©ìê°€ 10,000ì› ì£¼ë¬¸í•˜ê³  B ì‚¬ìš©ìê°€ 20,000ì› ì£¼ë¬¸ì„ ì£¼ë¬¸í•˜ì˜€ì„ ë•Œ, A ì‚¬ìš©ìì˜ ì£¼ë¬¸ ê¸ˆì•¡ì„ ì¡°íšŒí•˜ë©´ 20,000ì›ì´ ë‚˜ì˜¤ëŠ” ì•„ì£¼ ìœ„í—˜í•œ(?) ê²°ê³¼ê°€ ë‚˜ì˜¨ë‹¤.
  > ![](https://images.velog.io/images/shlee327/post/7c8d1959-b436-423c-9787-9bc939982660/core_%E2%80%93_README_md__core_-3.png)
- í•„ë“œê°€ ê³µìœ ë˜ê¸° ë•Œë¬¸ì— ê°€ê²©ì´ ë°”ë€ ê²ƒì´ë‹¤. ë”°ë¼ì„œ ìŠ¤í”„ë§ ë¹ˆì€ í•­ìƒ ë¬´ìƒíƒœ(stateless)ë¡œ ì„¤ê³„í•´ì•¼ í•œë‹¤.

## @Configurationê³¼ ì‹±ê¸€í†¤

- ìš°ë¦¬ëŠ” ê³„ì† ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ ì‹±ê¸€í†¤ íŒ¨í„´ì„ ìœ ì§€í•˜ë©° ê°ì²´ë¥¼ ê´€ë¦¬í•˜ëŠ”ì§€ ì—¬ë¶€ë¥¼ ì•Œì•„ë³´ê³  ìˆë‹¤.
- ê·¸ë ‡ë‹¤ë©´ ë‹¤ìŒê³¼ ê°™ì€ ìƒí™©ì—ì„œ ê¶ê¸ˆí•¨ì´ ìƒê¸¸ ìˆ˜ ìˆë‹¤.

> ![](https://images.velog.io/images/shlee327/post/1487c3dc-ea1b-4bed-bac3-b68e0543c85a/core_%E2%80%93_AppConfig_java__core_main_.png)
>
> - ì´ ì½”ë“œëŠ” ìŠ¤í”„ë§ ë¹ˆì„ ë“±ë¡í•˜ëŠ” `@Configuration` ì´ë‹¤.
> - ì—¬ê¸°ì„œ `memberRepository()` ë©”ì†Œë“œëŠ” 2ë²ˆ í˜¸ì¶œë˜ê³  ìˆë‹¤. `memberService`, `orderService` ë¹ˆì„ ë“±ë¡í•  ë•Œ ê°ê° í˜¸ì¶œì´ ë˜ë©´ì„œ `new MemoryMemberRepository()` ì½”ë“œë¥¼ í†µí•´ì„œ ê°™ì€ ê°ì²´ë¥¼ 2ë²ˆ ë§Œë“¤ ê²ƒì´ë¼ê³  ìƒê°í•˜ê²Œ ëœë‹¤. ê³¼ì—° ì‚¬ì‹¤ì¼ê¹Œ?
> - ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” ë¹ˆì„ ì‹±ê¸€í†¤ìœ¼ë¡œ ê´€ë¦¬í•œë‹¤ê³  í–ˆëŠ”ë°... ë¹ˆì„ ë“±ë¡í•  ë•Œ ê°™ì€ ê°ì²´ë¥¼ 2ë²ˆ í˜¸ì¶œí•´ì„œ ë§Œë“¤ê²Œ ë˜ë©´ ì‹±ê¸€í†¤ì´ ì•„ë‹Œê±° ì•„ë‹ˆì•¼? ë¼ê³  ìƒê°í•´ ë³¼ ìˆ˜ ìˆë‹¤.

- ì´ ê¶ê¸ˆì¦ë„ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ í†µí•´ ì•Œì•„ë³¼ ìˆ˜ ìˆë‹¤.

```java
public class ConfigurationSingletonTest {

    @Test
    @DisplayName("ìŠ¤í”„ë§ ë¹ˆ ë“±ë¡ ì‹œ ì¤‘ë³µì—¬ë¶€ í™•ì¸")
    void configurationTest() {

        //ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ì¡°íšŒ
        ApplicationContext ac = new AnnotationConfigApplicationContext(AppConfig.class);
        MemberServiceImpl memberService = ac.getBean("memberService", MemberServiceImpl.class);
        OrderServiceImpl orderService = ac.getBean("orderService", OrderServiceImpl.class);

        MemberRepository memberRepository1 = memberService.getMemberRepository();
        MemberRepository memberRepository2 = orderService.getMemberRepository();
        MemberRepository memberRepository = ac.getBean("memberRepository", MemberRepository.class);

        System.out.println("memberService -> memberRepository = " + memberRepository1);
        System.out.println("orderService -> memberRepository = " + memberRepository2);
        System.out.println("memberRepository -> memberRepository = " + memberRepository);

        assertThat(memberService.getMemberRepository()).isSameAs(memberRepository);
        assertThat(orderService.getMemberRepository()).isSameAs(memberRepository);
    }
}
```

#### ê²°ê³¼ë¥¼ ì˜ˆìƒí•´ë³´ì

- ìœ„ì— ì‚´í´ë³¸ `AppConfig` ì—ì„œ ì»¨í…Œì´ë„ˆì— ë¹ˆì„ ë“±ë¡í•  ë•Œ í˜¸ì¶œë˜ëŠ” `new MemoryMemberRepository()`ëŠ” ì´ 3ë²ˆì´ë‹¤.
  - memberService -> AppConfig.memberRepository
  - orderService -> AppConfig.memberRepository
  - memberRepository -> AppConfig.memberRepository
- 3ë²ˆ í˜¸ì¶œë˜ë©´ì„œ `MemoryMemberRepository` ê°ì²´ë¥¼ 3ê°œë¥¼ ë§Œë“¤ ê²ƒì´ë‹¤. ê·¸ë ‡ë‹¤ë©´ ëª¨ë‘ ë‹¤ë¥¸ ê°ì²´ê°€ ìƒì„±ë˜ì–´ì•¼ í•  ê²ƒì´ë‹¤. ì˜ˆìƒì´ ë§ì„ê¹Œ?

#### ì‹¤í–‰ê²°ê³¼

> ![](https://images.velog.io/images/shlee327/post/38ac7df4-a802-4099-acce-b07e80e77196/core_%E2%80%93_ConfigurationSingletonTest_java__core_test_.png)

- `@7824e97e` ì°¸ì¡°ê°’ì´ ëª¨ë‘ ë˜‘ê°™ë‹¤. ìŠ¤í”„ë§ ë¹ˆì„ ë“±ë¡í•˜ë©´ì„œ 3ê°œì˜ ì°¸ì¡°ê°’ì´ ë‹¤ë¥¼ ê²ƒì´ë¼ ì˜ˆìƒí–ˆì§€ë§Œ í…ŒìŠ¤íŠ¸ ê²°ê³¼ëŠ” ëª¨ë‘ ê°™ì€ ê°ì²´, ì¦‰ ì‹±ê¸€í†¤ìœ¼ë¡œ ê´€ë¦¬ë˜ê³  ìˆìŒì„ í™•ì¸í–ˆë‹¤.
- ì´ëŸ° ê²°ê³¼ê°€ ê°€ëŠ¥í•œ ê²ƒì€ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì—ì„œ ì§ì ‘ ë¹ˆì„ ë“±ë¡í•˜ê³  ê´€ë¦¬í•˜ê¸° ë•Œë¬¸ì— ê°€ëŠ¥í•œ ê²ƒì´ë‹¤.
- ë§ˆì§€ë§‰ìœ¼ë¡œ `@Configuration`ì˜ ì¤‘ìš”í•œ ì—­í• ì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ë„ë¡ í•˜ê² ë‹¤.

## @Configuration

- ì´ì „ í…ŒìŠ¤íŠ¸ì—ì„œ ìš°ë¦¬ëŠ” ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” ìë°”ì½”ë“œë¥¼ 3ë²ˆ í˜¸ì¶œí–ˆë‹¤. í•˜ì§€ë§Œ ìŠ¤í”„ë§ì€ 3ê°œì˜ ë‹¤ë¥¸ ê°ì²´ê°€ ì•„ë‹Œ ëª¨ë‘ ê°™ì€ ê°ì²´ë¥¼ ë˜ëŒë ¤ì£¼ì—ˆë‹¤.
- ì‹±ê¸€í†¤ì„ ë³´ì¥í•˜ëŠ” ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ ë¹ˆì„ ë“±ë¡í•  ë•Œ ë°”ì´íŠ¸ì½”ë“œë¥¼ ì¡°ì‘í•˜ì—¬ ì„ì˜ì˜ í´ë˜ìŠ¤ë¥¼ ìƒì„±í•˜ê³  ë“±ë¡í•˜ê¸° ë•Œë¬¸ì´ë‹¤.
- ì´í•´í•˜ê¸° ì–´ë ¤ì› ì§€ë§Œ ë‚´ìš©ì„ ì •ë¦¬í•´ë³´ë„ë¡ í•˜ê² ë‹¤.

```java
public class ConfigurationSingletonTest {

    @Test
    @DisplayName("ìŠ¤í”„ë§ ë¹ˆ í´ë˜ìŠ¤ í™•ì¸")
    void configurationDeepTest() {

      //ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ì¡°íšŒ
      ApplicationContext ac = new AnnotationConfigApplicationContext(AppConfig.class);
      AppConfig bean = ac.getBean(AppConfig.class);

      System.out.println("bean = " + bean.getClass());

    }

}
```

- ì½”ë“œë¥¼ ì‚´í´ë³´ë©´ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ë“±ë¡ëœ `bean`ì„ ì¡°íšŒí•˜ê³  í´ë˜ìŠ¤ëª…ì„ ì¶œë ¥í•˜ëŠ” ì½”ë“œì´ë‹¤.
- `AppConfig`ëŠ” `@Configuration` ìœ¼ë¡œ ë“±ë¡ëœ í´ë˜ìŠ¤ì´ë‹¤.

#### ì‹¤í–‰ê²°ê³¼

> ![](https://images.velog.io/images/shlee327/post/b2f31a61-f975-43ac-87b7-4a1ba577ff03/core_%E2%80%93_ConfigurationSingletonTest_java__core_test_-2.png)

- `bean = class hello.core.AppConfig$$EnhancerBySpringCGLIB$$573a269b`
- í´ë˜ìŠ¤ ì •ë³´ë¥¼ í™•ì¸í•´ë³´ë‹ˆ `$$EnhancerBySpringCGLIB$$573a269b` ì´ë¼ëŠ” ì´ìƒí•œ ë‚´ìš©ì´ ì¶”ê°€ë˜ì—ˆë‹¤.
- ì´ê²ƒì€ ë‚´ê°€ ë§Œë“  í´ë˜ìŠ¤ê°€ ì•„ë‹ˆë¼ ìŠ¤í”„ë§ì´ `CGLIB` ë¼ëŠ” ë°”ì´íŠ¸ì½”ë“œ ì¡°ì‘ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•´ì„œ AppConfig í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ì€ ì„ì˜ì˜ ë‹¤ë¥¸ í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ê³ , ê·¸ ë‹¤ë¥¸ í´ë˜ìŠ¤ë¥¼ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡í•œ ê²ƒì´ë‹¤.
- ê·¸ ì„ì˜ì˜ ë‹¤ë¥¸ í´ë˜ìŠ¤ê°€ ë°”ë¡œ ì‹±ê¸€í†¤ì´ ë³´ì¥ë˜ë„ë¡ í•´ì¤€ë‹¤.
- `@Bean`ì´ ë¶™ì€ ë©”ì„œë“œë§ˆë‹¤ ì´ë¯¸ ìŠ¤í”„ë§ ë¹ˆì´ ì¡´ì¬í•˜ë©´ ì¡´ì¬í•˜ëŠ” ë¹ˆì„ ë°˜í™˜í•˜ê³ , ìŠ¤í”„ë§ ë¹ˆì´ ì—†ìœ¼ë©´ ìƒì„± í•´ì„œ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡í•˜ê³  ë°˜í™˜í•˜ëŠ” ì½”ë“œê°€ ë™ì ìœ¼ë¡œ ë§Œë“¤ì–´ì§„ë‹¤.
- ê·¸ë ‡ë‹¤ë©´, `@Configuration` ì´ ì—†ë‹¤ë©´ ì–´ë–»ê²Œ ë ê¹Œ?

> ![](https://images.velog.io/images/shlee327/post/75a9eaaf-b0b1-4b82-9c10-f717064ac039/core_%E2%80%93_README_md__core_-5.png)

- `@Configuration` ì„ ì£¼ì„ì²˜ë¦¬í•˜ê³  ì‹¤í–‰í•œ í…ŒìŠ¤íŠ¸ ê²°ê³¼ì´ë‹¤.
- `AppConfig.memberRepository` ê°€ ë°˜ë³µì ìœ¼ë¡œ ì‹¤í–‰ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ê°ì²´ê°€ 3ê°œ ìƒì„±ë˜ì—ˆì§€ë§Œ ì‹±ê¸€í†¤ì„ ë³´ì¥í•˜ì§€ ì•ŠëŠ”ë‹¤.
- `@Configuration` ì„ ì‚¬ìš©í•˜ë©´ ìŠ¤í”„ë§ ë¹ˆì€ ì‹±ê¸€í†¤ìœ¼ë¡œ ë³´ì¥í•˜ì§€ë§Œ, ì—†ë‹¤ë©´ ìŠ¤í”„ë§ ë¹ˆì€ ë“±ë¡ë˜ì§€ë§Œ ì‹±ê¸€í†¤ì„ ë³´ì¥í•˜ì§€ ì•ŠëŠ”ë‹¤.
- ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ ë“±ë¡í•  ë•ŒëŠ” í•­ìƒ `@Configuration`ì„ ì‚¬ìš©í•˜ë„ë¡ í•˜ì.

> **í•™ìŠµì— ë„ì›€ì´ ë˜ì—ˆë˜ ìë£Œ**
>
> - [ê¹€ì˜í•œ - ìŠ¤í”„ë§ í•µì‹¬ ì›ë¦¬(ì¸í”„ëŸ°)](https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81-%ED%95%B5%EC%8B%AC-%EC%9B%90%EB%A6%AC-%EA%B8%B0%EB%B3%B8%ED%8E%B8#)
> - [ì‹±ê¸€í†¤ íŒ¨í„´ì˜ ë‹¨ì (https://ssoco.tistory.com/65)](https://ssoco.tistory.com/65)
> - [ì‹±ê¸€í†¤ íŒ¨í„´(ìœ„í‚¤ë°±ê³¼)](https://ko.wikipedia.org/wiki/%EC%8B%B1%EA%B8%80%ED%84%B4_%ED%8C%A8%ED%84%B4)
